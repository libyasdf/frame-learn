<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Expires" content="0">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Cache-control" content="no-cache">
	<meta http-equiv="Cache" content="no-cache">
    <title>表单页面</title>
    <link rel="stylesheet" href="/static/core/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/core/bootstrapvalidator/dist/css/bootstrapValidator.min.css"/>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/static/core/html5/html5shiv.min.js"></script>
    <script src="/static/core/html5/respond.js"></script>
    <![endif]-->
    <link href="/static/css/common/style.css" rel="stylesheet"/>
    <link href="/static/css/common/form-public.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/static/font/iconfont.css">
	<style type="text/css">
    	span{ white-space:pre-wrap;word-wrap : break-word ;overflow: hidden ;text-align:left}
    </style>
</head>

<body class="formpage_bj">
<div class="container-fluid formpage_area">
    <div class="form-horizontal">
        <!--<form class="form-horizontal" id="form">-->
        <!-- 基本信息 -->
        <div class="row">
            <div class="col-md-12 ">
                <div class="block_title">
                    <span class="name">试卷基本信息</span>
                </div>
            </div>
        </div>
        <div class="row m-t-15">
            <div class="col-md-12">
                <div class="form-group">
                    <label for="" class="col-md-2 control-label">试卷名称：</label>
                    <div class="col-md-10 form-view">
                        <span name="name" id="name"></span>
                    </div>
                </div>
                <div class="form-group">
               		<label for="" class="col-md-2 control-label">难易程度：</label>
                    <div class="col-md-4 form-view">
                        <span id="difficultyLevel"></span>
                    </div>
                    
                </div>
               <div class="form-group">
                    <label for="" class="col-md-2 control-label">备注：</label>
                    <div class="col-md-10 form-view">
                        <span name="remark" id = "remark"></span>
                    </div>
                </div>
                 <div class="form-group">
                	<label for="" class="col-md-2 control-label">是否共享：</label>
                    <div class="col-md-4 form-view">
                         <span id="isShare">是</span>
                    </div>
                    <label for="" class="col-md-2 control-label">是否可用：</label>
                    <div class="col-md-4 form-view">
                         <span id="state">是</span>
                    </div>
                 </div>
            </div>
        </div>
        <!-- 基本信息结束 -->

        <!-- 其他人员信息 -->
        <div class="row">
            <div class="col-md-12 ">
                <div class="block_title">
                    <span class="name">试卷试题</span>
                </div>
            </div>
        </div>

        <div class="row m-t-15">
            <div class="col-md-12">
                <table class="table table-bordered" name="table">
                    <thead id="renGong">
                    <tr>
                        <th width="10%" class="text-center">序号</th>
                        <th width="30%" class="text-center">类型</th>
                        <th width="20%" class="text-center">数量</th>
                        <th width="20%" class="text-center">分数</th>
                        <th width="20%" class="text-center">操作</th>
                    </tr>
                    </thead>
                    <thead  id = "auto">
						<tr>
							<th width="10%" class="text-center">序号</th>
							<th width="10%" class="text-center">类型</th>
							<th width="10%" class="text-center">简单</th>
							<th width="10%" class="text-center">一般</th>
							<th width="10%" class="text-center">困难</th>
							<th width="15%" class="text-center">每题分数</th>
							<th width="10%" class="text-center">总分</th>
							<th width="10%" class="text-center">操作</th>
						</tr>
					</thead>
                    <tbody id="tbody">
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row m-b-5">
            <div class="col-md-12">
                <label class="control-label">试卷总分：</label><span id="fullScore"></span>
            </div>
        </div>

        <!--</form>-->
    </div>
</div>

<!-- 按钮区 -->
<div class="form_btn_area" style="text-align: center;">
     <button id="preserveBtn" class="btn btn-primary form_btn_area_btn2" onclick="MyLayer.closeOpen();" ><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> 关闭</button>
</div>
<!-- 按钮区结束 -->

<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/core/layer/layer.js"></script>
<script src="/static/js/common/mylayer.js"></script>
<script src="/static/js/common/pageEcho.js"></script>
<!-- 页面获取参数 -->
<script type="text/javascript" src="/common/js/getrequest.js"></script>
<script type="text/javascript">
    var sjglReadOnly = function () {
        var arg = {
            url: "",
            title: ""
        };
        var viewsj = function (json) {
            var _arg = $.extend(arg, json);
            MyLayer.layerOpenUrl({
                url: _arg.url, //这里填写选择试题的页面
                title: _arg.title
            });
        }
        return {
            viewsj: function (json) {
                viewsj(json);
            }
        }
    }();
    var theRequest = GetRequest();
    $(document).ready(function () {
    	if(theRequest.createType == 0){
    		$("#auto").hide();
    		renGongZuJuan();
    	}else{
    		$("#renGong").hide();
    		autoZuJuan();
    	}
    	
    })
    function autoZuJuan(){
    	$.get("/zhbg/xxkh/xxkhPaperInfo/getAutoById",{id:theRequest.id},function(data){
    		PageEcho.parseData({
                data: data.data
            });
    		 $("#fullScore").text(data.data.fullScore);
             var difficultyLevel = data.data.difficultyLevel;
             if (difficultyLevel == 1) {difficultyLevel="简单";}
 			if (difficultyLevel == 2) {difficultyLevel="一般";}
 			if (difficultyLevel == 3) {difficultyLevel="困难";}
             $("#difficultyLevel").text(difficultyLevel);
             var isShare = data.data.isShare;
             if(isShare==1){isShare="是";}else{isShare="否";}
             $("#isShare").text(isShare);
             var state = data.data.state;
             if(state==1){state="是";}else{state="否";}
             $("#state").text(state);
    		$("#fullScore").text(data.data.fullScore);
			  var questionType = "";
			  var isZujuan="";
			  $.each(data.data.group,function(i,v){
				  if(v.zujuanStatus==1){
					  isZujuan="readonly='readonly'"
				  }
				    if (v.questionType == 1) {questionType="单选";}
					if (v.questionType == 2) {questionType="多选";}
					if (v.questionType == 3) {questionType="判断";}
					if (v.questionType == 4) {questionType="填空";}
					if (v.questionType == 5) {questionType="简答";}
				  $("#tbody").append('<tr id="'+v.questionType+'">\
							<td class="text-center">'+(i+1)+'</td>\
							<td class="text-center">'+questionType+'</td>\
							<td class="text-center">'+v.simpleCount+'</td>\
							<td class="text-center">'+v.normalCount+'</td>\
							<td class="text-center">'+v.hardCount+'</td>\
							<td class="text-center">'+v.everyScore+'</td>\
							<td class="text-center">'+v.fullScore+'</td>\
							<td class="text-center"><i style="cursor:pointer" class= \'glyphicon glyphicon-search\' title=\'查看试题\' ' +
	                        'onclick=\'sjglReadOnly.viewsj({url:"/modules/zhbg/xxkh/paperManage/sjglstxzReadOnlyList.html?id=' + v.id + '",title:"查看试题"})\'></i></td>\
						</tr>');
				  isZujuan="";
			  });
			  });
    }
    function renGongZuJuan(){
    	var questionType = "";
    	var html=[];
        // 加载数据
        $.get("/zhbg/xxkh/xxkhPaperInfo/getById",{id:theRequest.id},function (data) {
            PageEcho.parseData({
                data: data.data
            });
            $("#fullScore").text(data.data.fullScore);
            var difficultyLevel = data.data.difficultyLevel;
            if (difficultyLevel == 1) {difficultyLevel="简单";}
			if (difficultyLevel == 2) {difficultyLevel="一般";}
			if (difficultyLevel == 3) {difficultyLevel="困难";}
            $("#difficultyLevel").text(difficultyLevel);
            var isShare = data.data.isShare;
            if(isShare==1){isShare="是";}else{isShare="否";}
            $("#isShare").text(isShare);
            $.each(data.data.group,function(i,v){
            	if (v.questionType == 1) {questionType="单选";}
				if (v.questionType == 2) {questionType="多选";}
				if (v.questionType == 3) {questionType="判断";}
				if (v.questionType == 4) {questionType="填空";}
				if (v.questionType == 5) {questionType="简答";}
                    html.push('<tr>');
                    html.push('<td class="text-center" >' + (i+1) + '</td>');
                    html.push('<td class="text-center" >' + questionType + '</td>');
                    html.push('<td class="text-center" >' + (v.questionCount==""?0:v.questionCount) + '</td>');
                    html.push('<td class="text-center" >' + (v.fullScore==""?0:v.fullScore) + '</td>');
                    html.push('<td class="text-center">');
                    html.push('<i style="cursor:pointer" class=\'glyphicon glyphicon-search\' title=\'查看试题\' ' +
                        'onclick=\'sjglReadOnly.viewsj({url:"/modules/zhbg/xxkh/paperManage/sjglstxzReadOnlyList.html?id=' + v.id + '",title:"查看试题"})\'></i>');
                    html.push('</td>');
                    html.push('</tr>');
                    $('#tbody').empty().append(html.join(''));

                })
        
        },"json");
    }
</script>
</body>
</html>
 