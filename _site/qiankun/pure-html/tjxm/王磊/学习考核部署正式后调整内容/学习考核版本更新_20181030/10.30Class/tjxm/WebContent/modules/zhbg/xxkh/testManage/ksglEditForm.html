<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <title>企业中心</title>
    <link rel="stylesheet" href="/static/core/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/core/bootstrapvalidator/dist/css/bootstrapValidator.min.css"/>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/static/core/html5/html5shiv.min.js"></script>
    <script src="/static/core/html5/respond.js"></script>
    <![endif]-->
    <link href="/static/css/common/style.css" rel="stylesheet"/>
    <link href="/static/css/common/form-public.css" rel="stylesheet"/>
    <link href="/static/core/bootstrap-table/bootstrap-table.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="/static/font/iconfont.css">
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="/static/core/jquery-fileupload/css/jquery.fileupload.css">
</head>

<body class="formpage_bj">
<div class="container-fluid formpage_area" style="min-height: 300px">
    <form class="form-horizontal" id="form">
        <input type="hidden" id="textId"/>
        <input type="hidden" id="id"/>
        <input type="hidden" id="state"/>
        <input type="hidden" id="testName"/>
        <input type="hidden" id="type"/>
        <input type="hidden" id="juId"/>
        <input type="hidden" id="resId"/>
        <input type="hidden" id="nodeId"/>
        <input type="hidden" id="positions"/>
        <input type="hidden" id="positionLevels"/>
        <!-- 基本信息 -->
        <div class="row">
            <div class="col-md-12 ">
                <div class="block_title">
                    <span class="name">考试基本信息</span>
                </div>
            </div>
        </div>
        <div class="row m-t-15">
            <div class="col-md-12">
                <div class="form-group">
                	<div class="rowGroup">
	                    <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 考试名称：</label>
	                    <div class="col-md-10">
	                        <input type="text" class="form-control" id="name" name="name" placeholder="考试名称">
	                    </div>
                	</div>
                </div>
                <div class="form-group">
                	<div class="rowGroup">
	                    <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 考试时间：</label>
	                    <div class="col-md-4">
	                        <input type="text" class="form-control" id="timeRange" name="timeRange" placeholder="考试时间"  autocomplete="off">
	                    </div>
                	</div>
                	<div class="rowGroup">
	                    <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 难易程度：</label>
	                    <div class="col-md-4">
	                        <select class="form-control" name="difficultyLevel" id="difficultyLevel" >
	                            <option value="">---请选择---</option>
	                            <option value="1">简单</option>
	                            <option value="2">一般</option>
	                            <option value="3">困难</option>
	                        </select>
	                    </div>
                	</div>
                </div>
                <div class="form-group">
                    <div class="rowGroup">
	                    <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 答题时长（分钟）：</label>
	                    <div class="col-md-4">
	                        <input type="text" class="form-control" id="answerTime" name="answerTime" maxlength="3" placeholder="答题时长">
	                    </div>
                    </div>
                    <div class="rowGroup">
	                    <label for="" class="col-md-2 control-label"> 考试后显示成绩：</label>
	                    <div class="col-md-4">
	                        <label class="radio-inline">
	                            <input type="radio" id="inlineCheckbox" class="isShow" name="isShowAnswer" checked  onclick= "getTestInfo();" value="0"> 否
	                        </label>
	                        <label class="radio-inline">
	                            <input type="radio" id="inlineCheckbox1" class="isShow" name="isShowAnswer"  onclick= "getTestInfo();" value="1"> 是
	                        </label>
	                    </div>
                    </div>
                   
                </div>
                <div class="form-group">
               		 <div class="rowGroup">	
	                    <label for="" class="col-md-2 control-label"> 考试须知：</label>
	                    <div class="col-md-10">
	                        <textarea id="testNotice" name="testNotice" class="form-control" rows="3"></textarea>
	                    </div>
                    </div>
                </div>
                
             </div>
          </div>
           <!-- 考试基本信息结束 -->
                <!-- 考试试卷 -->
                <div class="row">
		            <div class="col-md-12 ">
		                <div class="block_title">
		                    <span class="name">考试试卷</span>
		                </div>
		            </div>
        		</div>
        		<div class="row m-t-15">
        			<div class="col-md-12">
		        		<div class="form-group">
		                	<div class="rowGroup" >
			                    <label for="" class="col-md-2 control-label"> 试卷名称：</label>
			                    <div class="col-md-4">
				                    <div  id="paperOne" style="display:none">
				                        <button id= "selectPap" class="list_table_btn2" type="button" onclick="selectPaper()"><span class="glyphicon glyphicon-plus-sign" title="kkk"></span> 选择试卷</button>
				                    	<div class="files row" id="files">
				                    	</div>
				                    </div>
				                     <div class="form-view" id="files2" style="display:none"></div>
			                    </div>
		                     </div>
		                     <div class="rowGroup">
			                     <label for="" class="col-md-2 control-label"> 是否多次考试<span class="glyphicon glyphicon-exclamation-sign" title="是：有多次考试机会；否：只有一次考试机会"></span>：</label>
		                    	<div class="col-md-4">
		                        <label class="radio-inline">
		                            <input type="radio" id="isMoreChance1" class="1" name="isMoreChance"  value="0"> 否
		                        </label>
		                        <label class="radio-inline">
		                            <input type="radio" id="isMoreChance2" class="1" name="isMoreChance" value="1"> 是
		                        </label>
		                    	</div>
               				</div>
		                </div>
		                <div class="form-group">
		                	<div class="rowGroup">
			                    <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 考试分数：</label>
			                    <div class="col-md-4">
			                        <input type="text" class="form-control" id="fullScore" name="full" placeholder="考试分数" readOnly>
			                    </div>
	                		</div>
			                <div class="rowGroup">
			                    <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 及格分数：</label>
			                    <div class="col-md-4">
			                        <input type="text" class="form-control" id="passScore" name="passScore" maxlength="6" placeholder="及格分数">
			                    </div>
		                	</div>
	                	</div>
                	</div>
                </div>
        		<!-- 考试试卷结束 -->
      		</form>
                  <!--   <div class="col-md-4" align="center">
                        <label class="checkbox-inline">
                            <input type="checkbox" id="inlineCheckbox2" name="displayDept" value="02"> 人工评卷
                        </label>
                    </div> -->
                    <!-- <div class="col-md-4" align="center">
                        <label class="checkbox-inline">
                            <input type="checkbox" id="inlineCheckbox3" name="question" value="03"> 答案顺序随机
                        </label>
                    </div> -->
        		<!-- 考试人员选择 -->
       		<form class="form-horizontal" id="form3">
               <div class="row">
                  <div class="col-md-12 ">
                      <div class="block_title">
                          <span class="name">考试人员选择</span>
                      </div>
                  </div>
               </div>
                  <div class="row m-t-15">
                  	<div class="col-md-12">
                  		<div class="form-group">
                  			<div class="rowGroup">
	                        <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 上报考试人员：</label>
		                    <div class="col-md-4">
		                        <label class="radio-inline">
		                            <input type="radio" id="inlineRadio1" class="isCheck" name="testToDepartment" value="0"> 否
		                        </label>
		                        <label class="radio-inline">
		                            <input type="radio" id="inlineRadio2" class="isCheck" name="testToDepartment"  value="1"> 是
		                        </label>
	                            <small class="reportTestUser" style="display:none;color:#a94442;">点击提交，给选择的处室发送上报考试人员待办事项！</small>
	                            <small class="reportTestUser2" style="display:none;color:#a94442;">可根据职务或职级选择考试人员范围，点击确定查看人员详情！</small>
		                    </div>
		                    </div>
	                    </div>
                    	<div id="one" style="display:none">
                    		<p></p>
                    		<div id="selectAre">
			                    <div class="form-group">
			                    	<div class="rowGroup">
				                        <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 处室选择：</label>
				                        <div class="col-md-10">
				                            <!-- <input type="text" class="form-control" id="name" name="name" placeholder="处室选择"> -->
				                             <input type="text" id="unitName" name="unitName" unselectable="on" onclick="selectChushi();" class="form-control" placeholder="处室选择">
				                             <input type="hidden" id="unitId" name="unitId" /><!-- 单位ID隐藏域 -->
				                             <input type="hidden" id="juId" name="juId" /><!-- 部门ID隐藏域 -->
				                        </div>
			                    	</div>
			                    </div>
			                    <!-- <div class="form-group">
			                        <label for="" class="col-md-2 control-label">职务级别选择：</label>
			                        <div class="col-md-8" style="vertical-align: middle;" id="position"></div>
			                    </div> -->
			                    <div class="form-group">
			                        <label for="" class="col-md-2 control-label">职级选择：</label>
			                        <div class="col-md-8" style="vertical-align: middle;" id="positionLevel"></div>
			                    </div>
			                    <div class="form-group">
			                            <div class="col-md-2" style="width:100%;text-align: center">
			                                <button type="button" class="btn btn-primary" onclick="queryTestPerson();" > 确&nbsp;&nbsp;定 </button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			                                <button type="button" class="btn btn-primary" onclick="cleanData();" > 取&nbsp;&nbsp;消 </button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			                            </div>
			                    </div>
		                    </div>
		                    <div class="row m-t-15" style="margin-top: 15px;">
		                    	<div class="col-md-12">
			                    	<label for="" class="col-md-2 control-label"></label>
			                        <div class="col-md-10 p-f-60">
			                        	<table id="right_table" >
			                        	</table>
			                        </div>
		                        </div>
		                    </div>
                		</div>
                    	<div id="two" style="display:none">
                    		<p></p>
		                    <div class="form-group">
		                    	<div class="rowGroup">
			                        <label for="" class="col-md-2 control-label"><b style="color: red;">*</b> 处室选择：</label>
			                        <div class="col-md-10">
			                             <input type="text" id="unitName2" name="unitName2" unselectable="on" onclick="selectChushi2();" class="form-control" placeholder="处室选择">
				                         <input type="hidden" id="unitId2" name="unitId2" /><!-- 单位ID隐藏域 -->
				                         <input type="hidden" id="juId" name="juId" /><!-- 部门ID隐藏域 -->
			                        </div>
		                        </div>
		                    </div> 
		                    <div class="form-group">
		                    	<div class="rowGroup">
			                        <label for="" class="col-md-2 control-label">人员要求：</label>
			                        <div class="col-md-10">
			                            <textarea id= "requirement" name="requirement" class="form-control" rows="3"></textarea>
			                        </div>
		                        </div>
		                    </div>
		                    <div class="form-group" id="didNotReport" style="display:none">
		                    	<label for="" class="col-md-2 control-label"> 未上报的处室：</label>
		                        <div class="col-md-10">
		                        	<input type="text" class="form-control" id="noReport" name="noReport" readOnly placeholder="">
		                        </div>
	                        </div>
		                    <div class="form-group" id="hasBeenReported" style="display:none">
		                    	<label for="" class="col-md-2 control-label"> 已上报的处室：</label>
		                        <div class="col-md-10">
		                        	<table id="right_table2"></table>
		                        </div>
	                        </div>
                    	</div>
                    </div>
                  </div>
            </form>
           <!-- 考试人员选择 结束-->
</div>
<!-- 按钮区 -->
<div class="form_btn_area" style="text-align: center;">
    <button  id="save" class="btn btn-primary form_btn_area_btn2" onclick="saveForm();"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> 保存</button>
    <button  id="submit" style="display:none" class="btn btn-primary form_btn_area_btn2" onclick="commitReportNotice();" ><span class="glyphicon glyphicon-send" aria-hidden="true"></span> 提交</button>
    <button  id="preserveBtn"  class="btn btn-primary form_btn_area_btn2" onclick="commitForm();"><span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span> 发布</button>
</div>
<!-- 按钮区结束 -->
<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/core/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/static/core/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="/static/core/bootstrapvalidator/dist/js/bootstrapValidator.min.js"></script>
<script src="/static/core/layer/layer.js"></script>
<script src="/static/js/common/mylayer.js"></script>
<!-- 表格js -->
<script src="/static/js/common/tablelist.js"></script>

<script src="/static/js/common/url.js"></script>
<script type="text/javascript" src="/modules/system/component/tree/js/deptUserTree.js"></script>
<script src="/static/core/laydate/laydate.js"></script>
<!-- 引入自己功能的js -->
<script src="/modules/zhbg/xxkh/testManage/js/ksglEditForm.js"></script>
<script src="/modules/zhbg/xxkh/testManage/js/ksglValidator.js"></script>
<!-- 页面获取参数 -->
<script type="text/javascript" src="/common/js/getrequest.js"></script>
<script src="/product/workflow/js/common/getCook.js"></script>

<!-- 编辑回显js -->
<script src="/modules/zhbg/xxkh/testManage/js/ksglEditFormEcho.js"></script>
<script src="/modules/zhbg/xxkh/testManage/js/testpaperupload.js"></script>
<!--文件上传js-->
<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="/static/core/jquery-fileupload/js/vendor/jquery.ui.widget.js"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="/static/core/jquery-fileupload/js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="/static/core/jquery-fileupload/js/jquery.fileupload.js"></script>
<script src="/static/js/common/myfilupload.js"></script>
<!--文件上传js end-->
<script type="text/javascript">
	var	 type = "";
	var roleNo = "D221,C221";
    $(function () {
    	var theRequest = GetRequest();
    	type = theRequest.treeType;
    	
        $(".isCheck").click(function () {
            if($("#inlineRadio2").is(":checked")){
            	//$("#inlineRadio1").prop("disabled",true);
                $("#one").css("display","none");
                $("#two").css("display","block");
                $(".reportTestUser").css("display","block");
                $(".reportTestUser2").css("display","none");
                $("#submit").show();
                $("#preserveBtn").hide();
            }else{
                $("#one").css("display","block");
                $("#two").css("display","none");
                $(".reportTestUser").css("display","none");
                $(".reportTestUser2").css("display","block");
               	$("#submit").hide();
               	$("#preserveBtn").show();
            }
        }) 
        $("#isMoreChance1").attr("checked",true);
    })
    
</script>
<script type="text/javascript">
    //绑定日期输入input
    laydate.render({
        elem: '#birth' //指定元素
    });
    //日期范围
    laydate.render({
        elem: '#timeRange'
        , range: true
        , min:1
        ,done: function(value, datas){
        	$('#timeRange').val(value).change();
        }
    });
    //定义bootatrap-table数据列
	//sortable：开启列排序，其他参考API
	var right_table_col = [{
	    field: 'id'
	    , title: '序号'
	    , width: '8%'
	    , sortable: false
	    , align:"center"
	    , formatter: function (value, row, index) {
	    	 //返回每条的序号：只应用于前端分页
	        return "<span data-id='"+row.id+"' >"+(index+1)+"</span>";   
	    }  
	},{
	    field: 'candidatejuid'
		    , title: '部门'
		    , width: '15%'
		    , sortable: false
		    , align:"center"
		    ,formatter:function(value,row,index){
				return "<span dept-id='"+row.candidatejuid+"' >"+row.candidatejuname+"</span>";
			}
	},{
	    field: 'candidatechushiid'
	    , title: '处室'
	    , width: '15%'
	    , sortable: false
	    , align:"center"
	    ,formatter:function(value,row,index){
			return "<span dept-id='"+row.candidatechushiid+"' >"+row.candidatechushiname+"</span>";
		}
	},{
	    field: 'num'
	    , title: '人数'
	    , sortable: false
	    , width: '15%'
	    , align:"center"
	},{
	    field: 'cz'
	    , title: '操作'
	    , sortable: false
	    , width: '15%'
	    , align:"center"
    	,formatter:function(value,row,index){
    		var html = '<a onclick="openTestPerson(\''+row.candidatechushiid+'\');"><i title="查看人员详情" style="cursor:pointer" class="glyphicon glyphicon-search"></i></a>';
			return html;
		}
	}]; 
    //用于回显列表用的表头字段
	var right_table_echo_col = [{
	    field: 'id'
	    , title: '序号'
	    , width: '8%'
	    , sortable: false
	    , align:"center"
	    , formatter: function (value, row, index) {
	        //计算序号，并存放开关ID，及已办事项ID
	       /*  var tableId = "";
	        if($("input[name='testToDepartment']:checked").val()=="1"){
	        	tableId = "right_table2";
	        }else if($("input[name='testToDepartment']:checked").val()=="0"){
	        	tableId = "right_table";
	        } */
	       /*  var pageSize=$("#"+tableId).bootstrapTable('getOptions').pageSize;//通过表的#id 可以得到每页多少条
	        var pageNumber=$("#"+tableId).bootstrapTable('getOptions').pageNumber;//通过表的#id 可以得到当前第几页
	        var orderNum = pageSize * (pageNumber - 1) + index + 1;//计算序号 */
	        return "<span data-id='"+row.id+"' >"+(index+1)+"</span>";    //返回每条的序号： 每页条数 * （当前页 - 1 ）+ 序号
	    } 
	},{
	    field: 'candidateJuName'
		    , title: '部门'
		    , width: '15%'
		    , sortable: false
		    , align:"center"
		    ,formatter:function(value,row,index){
				return "<span dept-id='"+row.candidateJuId+"' >"+row.candidateJuName+"</span>";
			}
	},{
	    field: 'candidateChushiName'
	    , title: '处室'
	    , width: '15%'
	    , sortable: false
	    , align:"center"
	    ,formatter:function(value,row,index){
			return "<span dept-id='"+row.candidateChushiId+"' >"+row.candidateChushiName+"</span>";
		}
	},{
	    field: 'num'
	    , title: '人数'
	    , sortable: false
	    , width: '15%'
	    , align:"center"
	},{
	    field: 'cz'
	    , title: '操作'
	    , sortable: false
	    , width: '15%'
	    , align:"center"
		,formatter:function(value,row,index){
			var html = '';
			if(row.num>0){
				html += '<a onclick="openTestPerson(\''+row.candidateChushiId+'\');"><i title="查看人员详情" style="cursor:pointer" class="glyphicon glyphicon-search"></i></a>';
			}else{
				html += '<a onclick="openTestPerson(\''+row.candidateChushiId+'\');"><i title="查看人员详情" style="cursor:pointer" class="glyphicon glyphicon-search"></i></a>';
				html += '&nbsp;&nbsp;<a href="" ><i title="催报" class="iconfont icon-phone"></i></a>';
			} 
			return html;
		}
	}]; 
    
</script>
</body>
</html>
