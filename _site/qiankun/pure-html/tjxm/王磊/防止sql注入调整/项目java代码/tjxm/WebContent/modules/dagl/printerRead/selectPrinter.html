<!DOCTYPE html>
<html lang="zh-CN">
<link rel="stylesheet" href="/static/core/bootstrap/css/bootstrap.min.css"/>
<link rel="stylesheet" href="/static/core/bootstrapvalidator/dist/css/bootstrapValidator.min.css"/>
<script src="/static/core/html5/html5shiv.min.js"></script>
<script src="/static/core/html5/respond.js"></script>
<link href="/static/css/common/style.css" rel="stylesheet"/>
<link href="/static/css/common/form-public.css" rel="stylesheet"/>
<link rel="stylesheet" href="/static/core/jquery-fileupload/css/jquery.fileupload.css">
<link rel="stylesheet" href="/static/font/iconfont.css">
<body class="formpage_bj">
<form class="form-horizontal" id="form">
    <div style="position: relative; width: calc(100% - 110px); margin: 10px auto 10px auto; background: #ffffff; min-height: 200px; border: 1px solid #e8e8e8;" >
        <div class="row m-t-15">
            <div class="col-md-12">
                <div class="form-group">
                    <label class="col-md-2 control-label" style="display: inline">选择打印机：</label>
                    <div class="col-md-4"  style="display: inline">
                        <select id="printer"></select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<div class="form_btn_area" style="text-align: center;">
    <button id="save" class="btn btn-primary form_btn_area_btn2" onclick="getZeBraName()" ><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> 确定</button>
</div>
<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
<script src="/static/js/common/mylayer.js"></script>
<script src="/static/js/common/jquery.tablednd.js"></script>
<script type="text/javascript" src="/static/js/common/assistUtil.js"></script>
<script src="/static/core/layer/layer.js"></script>
<script type="text/javascript">
   $(function() {
       //初始化字典项
       Dictionary.init({ position: "printer", mark: "printer", type: "1", name: "printer", domType: "select" });
   });
function getZeBraName() {
    var zeBraName = $("#printer option:selected").text();
    var zeBraIp = $("#printer option:selected").val();
    if(zeBraName && zeBraName !="" && zeBraName!=null && zeBraIp && zeBraIp!="" && zeBraIp!=null){
        window.parent.printerZeBra(zeBraName,zeBraIp);
        var indexSelf = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
        parent.layer.close(indexSelf); //再执行关闭
    }else{
        layer.msg("请选择打印机或选择的打印机配置错误！",{icon:0})
    }
}
</script>
</body>
</html>