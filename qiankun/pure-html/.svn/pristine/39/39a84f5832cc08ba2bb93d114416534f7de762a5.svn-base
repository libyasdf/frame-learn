<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    
    <title></title>
    <link rel="stylesheet" type="text/css" href="/static/css/common/Loading.css">
    <link rel="stylesheet" href="/static/core/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/core/bootstrapvalidator/dist/css/bootstrapValidator.min.css"/>
    <link rel="stylesheet" href="/static/core/jquery-fileupload/css/jquery.fileupload.css">
     <link href="/static/core/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <link href="/static/core/bootstrap-table/bootstrap-table.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/static/font/iconfont.css">
    <link rel="shortcut icon" href="/favicon.ico" />
    <link href="/static/core/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet" />
    <link rel="stylesheet" href="/static/core/layer/theme/default/layer.css">
    <link rel="stylesheet" href="/static/css/gateway/reset.css">
    <link rel="stylesheet" href="/static/font/iconfont-gateway/iconfont.css">

    <!-- style.css -->
    <link href="/static/css/common/style.css" rel="stylesheet">
    <link href="/static/css/common/form-public.css" rel="stylesheet">
    <link href="/static/css/common/index.css" rel="stylesheet">

    <!-- 滚动条 -->
    <link rel="stylesheet" href="/static/core/mCustomScrollbar/jquery.mCustomScrollbar.css">

    <!-- 获取url -->
    <script src="/static/js/common/url.js" type="text/javascript"></script>

    <!-- 开关配置 -->
    <link rel="stylesheet" type="text/css" href="/modules/system/config/toggle/css/toggleStyle.css">
    <link href="/static/core/font-awesome-4.7.0/css/font-awesome.css" rel="stylesheet" type="text/css" />
    <link href="/static/core/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
		span{ white-space:pre-wrap;word-wrap : break-word ;overflow: hidden ;text-align:left}
		.hidden{
			display:none !important;
			visibility:hidden !important
		}
		/* #table_list tr {
	 		text-align:center
		} */
	</style>
</head>
<body class="formpage_bj">
<div class="container-fluid formpage_area">
    <form class="form-horizontal" id="form">
        <!-- 流程字段-->
		<input name="id" id="id" type="hidden" value=""/><!-- 工作项ID -->
		
		<!-- 流程字段结束 -->
        <!-- 基本信息 -->
        <div class="row">
            <div class="col-md-12 ">
                <div class="block_title">
                    <span class="name">外卖信息</span>
                </div>
            </div>
        </div>
        <div class="row m-t-15">
            <div class="col-md-12">
                <div class="form-group">
                    <label class="col-md-2 control-label"> 展示日期：</label>
                    <div class="col-md-10 form-view">
                        <span id="showDate" name="showDate">2019-04-22 - 2019-04-28</span>
                    </div>
                </div>
               <div class="form-group">
                    <label class="col-md-2 control-label">最晚预定时间：</label>
                    <div class="col-md-4 form-view">
                    	<span id="deadlineDate" name="deadlineDate">2019-04-22 10:00:00</span>
                    </div>
                    <label class="col-md-2 control-label">订单限制：</label>
                    <div class="col-md-4 form-view">
                    	<span style="float: left;width:8%">3</span><span>次/人</span>
                    </div>
                </div>
                
                <div class="form-group">
                    
                    <label class="col-md-2 control-label">注意事项：</label>
                    <div class="col-md-4 form-view">
                    	<span id="attentionItem" name="attentionItem" ></span>
                    </div>
                   
                </div>
           
                
                
                <div class="form-group">
                    <label class="col-md-2 control-label">备注：</label>
                    <div class="col-md-10 form-view">
                    	<span id="remark" name="remark"></span>
                    </div>
                </div>
                
               
                
                <!--文件上传end-->
                
	               <div class="modal-body selectjs" style="padding-left:0px;padding-top:30px;padding-bottom:0px">
	               		<div class="block_title">
							<div class="selectjs_block" style="height: 100%;">
									<div class="title_tab">
										<ul class="nav nav-tabs" id="nav">
											<li class="active" for="formpage1"><a href="#"
												data-toggle="tab"> 订单确认</a></li>
											<li for="formpage2"><a href="#" data-toggle="tab"> 商品汇总 </a>
											</li>
										</ul>
									</div>
						  	</div>
					  </div>
					</div>
				
            <div class="modal-body selectjs" style="padding-left:0px;padding-bottom:0px">
				<div class="selectjs_block" style="height: auto;">
					
					
					<div class="container-fluid main">
						<div class="row"  id="formpage1">
							<!--查询-->
								<form class="form-horizontal" >
									<div class="col-md-12">
										<div class="panel panel-default toggle">
											<div class="panel-heading" style="cursor: pointer;">
												<h3 class="panel-title" style="display: inline-block;">查询项</h3>
												<div class="panel-controls " style="display: inline-block;position: absolute; right: 30px;">
													<i class="glyphicon glyphicon-plus showSelect"></i>
												</div>
											</div>
											<div class="panel-body" style="display: none;">
												<div class="form-group">
													<label class="col-md-2 control-label"> 用户：</label>
													<div class="col-md-3">
														 <div class="input-group">
						                                <input type="text" id="serviceDeptName" name="serviceDeptName" unselectable="on" onclick="openSelectZtree({'id':'serviceDeptId','name':'serviceDeptName','isMulti':'1','type':'2','asyn':true,'url':'/system/component/tree/deptTree',
						                                	                                                                                                      'select':true,'check':'','cancle':''})" class="form-control">
						                                <input type="hidden" id="serviceDeptId" name="serviceDeptId" /><!-- 人员ID隐藏域 -->
						                                <span class="input-group-addon" onclick="openSelectZtree({'id':'serviceDeptId','name':'serviceDeptName','isMulti':'1','type':'2','asyn':true,'level':'4','url':'/system/component/tree/deptTree','select':true,'check':'','cancle':''})">
						                                      <span class="glyphicon glyphicon-user"></span>
						                                </span>
						                            	</div>
													</div>
												
													
													<label class="col-md-2 control-label"> 状态：</label>
													<div class="col-md-5">
														<label class="radio-inline">
															<input type="radio" id="inlineRadio1" name="state" value="" checked="checked"> 全部
														</label>
														<label class="radio-inline">
															<input type="radio" id="inlineRadio2" name="state" value="0"> 未确认
														</label>
														<label class="radio-inline">
															<input type="radio" id="inlineRadio3" name="state" value="1"> 已领取
														</label>
														<label class="radio-inline">
															<input type="radio" id="inlineRadio3" name="state" value="1"> 未领取
														</label>
														
														
													</div>
												</div>
												<div class="form-group">
													<label class="col-md-2 control-label"> 订单号：</label>
													<div class="col-md-3">
														<input class="form-control" type="text" id="timeRange" name="timeRange" />
													</div>
													
												</div>
												<!--查询重置等按钮-->
												<div class="form-group">
													<div class="col-md-12" style="text-align: center">
														<button type="button" class="btn btn-primary"
																onclick="TableInit.refTable('right_table')"> 查&nbsp;&nbsp;询
														</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
														<button type="button" class="btn btn-primary"
																onclick="TableInit.refTable('right_table')"> 重&nbsp;&nbsp;置
														</button>
													</div>
												</div>
											</div>
										</div>
									</div>
								</form>
								<!--查询结束-->
						
								<div class="col-md-12">
									<div class="list_button_area">
										<button class="list_table_btn2"
												onclick="draft();">
											<span class="glyphicon glyphicon-ok"></span> 已领取
										</button>
										<button class="list_table_btn2"
												onclick="draft();">
											<span class="glyphicon glyphicon-remove">未领取</span> 
										</button>
										<button class="list_table_btn2"
												onclick="draft();">
											<span class="glyphicon glyphicon-trash"> 已取消</span> 
										</button>
										<button class="list_table_btn2"
												onclick="draft();">
											<span class="glyphicon glyphicon-chevron-right"></span> 导出
										</button>
										
										
									</div>
									<!--bootstrap-table表格-->
									<table id="right_table"></table>
								</div>
							</div>
							
							<div class="row hidden"  id="formpage2"  >
								<div class="title_tab" style="margin-left: 15px;">
					                	<ul class="nav nav-tabs" id="nav1">
										  <li class="active"><a href="#" >面食</a></li>
										  <li><a href="#">炒菜</a></li>
										</ul>
								</div>
								<div class="col-md-12">
									<table id="right_table2"></table>
								</div>
							</div>
							
				</div>
					
				
				</div>
		</div>
            
                
                
                
            </div>
        </div>
        <!-- 基本信息结束 -->
    </form>
    
</div>

<!-- 按钮区 -->

<!-- 按钮区结束 -->
<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/core/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/static/core/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="/static/core/bootstrapvalidator/dist/js/bootstrapValidator.min.js"></script>
<script src="/static/core/layer/layer.js"></script>
<script src="/static/js/common/mylayer.js"></script>
<script type="text/javascript" src="/static/js/common/assistUtil.js"></script>

<script src="/static/core/laydate/laydate.js"></script>
<!-- 流程相关 -->
<script type="text/javascript" src="/common/js/config.js"></script>
<script type="text/javascript" src="/product/workflow/js/storages.js"></script>
<script type="text/javascript" src="/common/js/commonFunction.js"></script>
<script type="text/javascript" src="/common/html/notion/notion.js"></script>
<!-- 获取cookie值 -->
<script type="text/javascript" src="/product/workflow/js/common/getCook.js"></script>
<!-- 页面获取参数 -->
<script type="text/javascript" src="/common/js/getrequest.js"></script>
<!-- 引入自己模块功能的js -->
<script type="text/javascript" src="/modules/zhbg/hygl/meetingApply/js/meetingApplyForm.js"></script>
<!-- 数据渲染 -->
<script src="/static/js/common/displayData.js"></script>

<!--文件上传js-->
<script src="/static/core/jquery-fileupload/js/vendor/jquery.ui.widget.js"></script>
<script src="/static/core/jquery-fileupload/js/jquery.iframe-transport.js"></script>
<script src="/static/core/jquery-fileupload/js/jquery.fileupload.js"></script>
<script src="/static/js/common/tablelist.js"></script>
<script src="/static/js/common/myfilupload.js"></script>
<!--文件上传js end-->
<script type="text/javascript">
var right_table_col2 = [
	
	{
    field: 'id'
    , title: '序号'
    , width: '3%'
     , align:"center"
    , formatter: function (value, row, index) {
        //计算序号，并存放业务ID，及已办事项ID
        var pageSize=$('#right_table').bootstrapTable('getOptions').pageSize;//通过表的#id 可以得到每页多少条
        var pageNumber=$('#right_table').bootstrapTable('getOptions').pageNumber;//通过表的#id 可以得到当前第几页
        var orderNum = pageSize * (pageNumber - 1) + index + 1;//计算序号
        return "<span data-id='"+row.id+"' data-workitemid='"+row.yibanid+"'>"+orderNum+"</span>";    //返回每条的序号： 每页条数 * （当前页 - 1 ）+ 序号
    }
},

    {
        field: 'shangpins1' 
       , title: '商品'
       , width: '10%'
       , align:"center"
    },
    {
        field: 'shuliang1' 
       , title: '数量'
       , width: '30%'
       , align:"center"
    }];
    
    
var right_table_col = [
	{
		title : "",
		width : '3%',
		align : "center",
		checkbox : "true",
		formatter : function(value, row, index) {
			 if (row.status != "0")
		         return {
		             disabled : true,//设置是否可用
		     };
		}
	},
	{
    field: 'id'
    , title: '序号'
    , width: '3%'
   
   
    , align:"center"
    , formatter: function (value, row, index) {
        //计算序号，并存放业务ID，及已办事项ID
        var pageSize=$('#right_table').bootstrapTable('getOptions').pageSize;//通过表的#id 可以得到每页多少条
        var pageNumber=$('#right_table').bootstrapTable('getOptions').pageNumber;//通过表的#id 可以得到当前第几页
        var orderNum = pageSize * (pageNumber - 1) + index + 1;//计算序号
        return "<span data-id='"+row.id+"' data-workitemid='"+row.yibanid+"'>"+orderNum+"</span>";    //返回每条的序号： 每页条数 * （当前页 - 1 ）+ 序号
    }
},{
    field: 'orderNum'
    , title: '订单号'
    , width: '12%'
    , align:"center"
},

    {
        field: 'creDeptName' 
       , title: '用户'
       , width: '10%'
       , align:"center"
    },
    {
        field: 'shangpins' 
       , title: '购买商品'
       , width: '30%'
       , align:"center"
    },
   /*  {
        field: 'jine' 
       , title: '金额/元'
       , width: '10%'
       , align:"center"
    }, */
{
    field: 'status'
    , title: '状态'
    , width: '10%'
    , align:"center"
    , formatter: function (value, row, index) {
         	if(value=='0') return '未确认'
         	else if(value=='1')return '已领取'
         	
         	else return '未领取'
         	
      }
},
{
    field: 'cz'
    , title: '操作'
    , width: '10%'
    , align: "center"
    , formatter: function (value, row, index) {  //直接定义function,return就是html代码
        var opt = value.split(",");
        var html = "";
        
        if(row.status=='0'){
        	//html += "<i class='glyphicon glyphicon-edit' onclick=\'list.editFun(\""	+ row.id + "\")\' title='编辑'></i>&nbsp;&nbsp;";
        	html += "<i class='glyphicon glyphicon-ok' onclick=\'list.editFun(\""	+ row.id + "\")\' title='领取'></i>&nbsp;&nbsp;";
        	html += "<i class='glyphicon glyphicon-remove' onclick=\'list.editFun(\""	+ row.id + "\")\' title='未领取'></i>&nbsp;&nbsp;";
        	html += "<i class='glyphicon glyphicon-trash' title='已取消'></i>&nbsp;&nbsp;";
        }
       
        return html;
    }
}];

var list = {
		editFun : function(id) {
			
			 var resId = $('#left_ul').find('a.active').attr("id");
			MyLayer.layerOpenUrl({
				url : '/modules/mypage/wm/takeout/orderEditForm.html?id='
						+ id + "&oper=EDIT&resId=" + resId,
				title : "修改订单信息"
			})
		},
		deleteFun : function(id) {
			var resId = $('#left_ul').find('a.active').attr("id");
            MyLayer.deleteOpt({
            	url: '/zhbg/kqgl/overTime/deleteoverTime?id=' + id + "&resId=" + resId,
                tableId:'right_table1'
            })
		}
	}
$(document).ready(function (e) {
    //初始化表格
    TableInit.init({
        domId:"right_table",
        url:"/mock/taskout/orderList.json",
        columns:right_table_col,
        queryParams:function(params){
            return params;
        },
        readOnlyFn:function(){
            $('tr.readOnly').find('td:not(:last),td:not(:first)').unbind('click').bind('click',function(e){
                   var resId = $('#left_ul').find('a.active').attr("id");
					MyLayer.layerOpenUrl({
						url : '/modules/mypage/wm/takeout/orderReadOnlyForm.html?oper=EDIT&resId=' + resId,
						title : "查看订单信息"
					})
            });
        }
    });
    TableInit.init({
        domId:"right_table2",
        url:"/mock/taskout/orderList.json",
        columns:right_table_col2,
        queryParams:function(params){
            return params;
        },
        readOnlyFn:function(){
            /* $('tr.readOnly').find('td:not(:last)').unbind('click').bind('click',function(e){
                   var resId = $('#left_ul').find('a.active').attr("id");
					MyLayer.layerOpenUrl({
						url : '/modules/mypage/wm/takeout/orderReadOnlyForm.html?id='
								+ id + "&oper=EDIT&resId=" + resId,
						title : "查看订单信息"
					})
            }); */
        }
    });
    $('#nav > li').unbind('click').bind('click', function () {
    	
        var id = $(this).attr('for');
        $(this).addClass('active').siblings('li').removeClass('active');
        $('.main').children().addClass('hidden');
        $('#' + id).removeClass('hidden');
    })
    $('#nav1 > li').unbind('click').bind('click', function () {
    
        $(this).addClass('active').siblings('li').removeClass('active');
        
    })
});
</script>
</body>
</html>
