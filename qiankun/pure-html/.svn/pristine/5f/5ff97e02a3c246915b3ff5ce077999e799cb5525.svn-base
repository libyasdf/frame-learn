<style type="text/css">
    .panel-controls{
        position: absolute;
        right: 40px;
        top: 10px;
    }
    .panel-controls > i.showSelect{
        font-size: 16px;
        color: #acb1b8;
        cursor: pointer;
    }
    label{
        font-weight: normal;
    }
</style>
<div class="container-fluid">
    <div class="row">
        <!--查询-->
        <form class="form-horizontal" >
            <div class="col-md-12">
                <div class="panel panel-default toggle">
                    <div class="panel-heading" style="cursor: pointer;">
                       <h3 class="panel-title">查询项</h3>
                       <div class="panel-controls " >
                           <i class="glyphicon glyphicon-plus showSelect"></i>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="form-group" style="text-align: center">
                            <label class="col-md-1 control-label"> 日期：</label>
                            <div class="col-md-3">
                                <input class="form-control" type="text" id="timeRange"/>
                            </div>
                            <label class="col-md-1 control-label"> 会议室：</label>
                            <div class="col-md-3">
                                <select class="form-control" id="meetingRoom" name="meetingRoom" >
                                    <option>---请选择---</option>
                                    <option>第一会议室</option>
                                    <option>第二会议室</option>
                                </select>
                            </div>
                            <div class="col-md-3" >
                                    <button type="button" class="btn btn-primary"
                                            onclick="queryMeetingCount()"> 查&nbsp;&nbsp;询
                                    </button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                  <button type="button" class="btn btn-primary"
                                            onclick="clearAll()"> 重&nbsp;&nbsp;置
                                    </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <!--查询结束-->
        
        <div class="col-md-12">
            <form class="form-horizontal" id="form">
        <!-- 基本信息 -->
        <div class="row">
            <div class="col-md-12 ">
                <div class="block_title">
                    <span class="name">会议统计情况</span>
                </div>
            </div>
        </div>
            <div class="col-md-12">
            <table id="right_table"></table>
                <!-- <div class="form-group">
                    <label class="col-md-2 control-label"> 办会次数：</label>
                    <div class="col-md-10 form-view">
                        <span id="count" name=count ></span>
                    </div>
                </div> 
                <div id="chartContainer" style="width: 550px; height: 400px; margin: 0 auto"></div>  -->              
            </div>
        <!-- 基本信息结束 -->

    </form>
        </div>
    </div>
</div>
<script type="text/javascript" src="/common/js/commonFunction.js"></script>
<script type="text/javascript">
    //参考：http://www.layui.com/laydate/
    //日期范围
    laydate.render({
        elem: '#timeRange'
        , range: true
    });


    //定义bootatrap-table数据列
    var right_table_col = [{
        field: 'id'
            , title: '序号'
            , width: '5%'
            , sortable: true
            , order: "desc"
            , align:"center"
        },{
            field: 'hys'
            , title: '会议室'
            , width: '20%'
            , sortable: true
            , align:"center"
        },{
        field: 'chcs'
        , title: '使用次数'
        , width: '70%'
        , align:"center"
    }];
    $(document).ready(function (e) {
        //初始化表格
        TableInit.init({
            domId:"right_table",
            url:"/mock/zhbg/hygl/statistics/statisticsList.json",
            columns:right_table_col,
            queryParams:function(params){
                //这里将各个查询项添加到要传递的参数中
//                可以做一些校验
                params.directorName = $('#queryDiv input[name=\'meetingRoom\']').val();
                params.mailName = $('#queryDiv input[name=\'rangeTime\']').val();
                return params;
            },
            readOnlyFn:function(){
//                $('tr.readOnly').find('td:not(:last)').unbind('click').bind('click',function(e){
////                    取消事件冒泡
//                    var evt = e ? e : window.event;
//                    if (evt.stopPropagation) {
//                        evt.stopPropagation();
//                    }else {
//                        evt.cancelBubble = true;
//                    }
////                    取消事件冒泡 end
//                    MyLayer.layerOpenUrl({url:'/modules/zhbg/hygl/meetingSignIn/meetingSignInList.html',title:'签到'});
//                });
            }
        });
    });

    $(document).ready(function (e) {
    	queryMeetingCount();
    	/* var chart = {
    		      type: 'column'
    		   };
    		   var title = {
    		      text: '部门办会次数'   
    		   };
    		   var subtitle = {
    		      text: 'Source: 天津局'  
    		   };
    		   var xAxis = {
    		      categories: ['办公厅','指挥部门','资金局','评审局','科技局','交通局','测试部','保密局','刑侦局','档案局','检查局','审判局'],
    		      crosshair: true
    		   };
    		   var yAxis = {
    		      min: 0,
    		      title: {
    		         text: '办会次数 (n)'         
    		      }      
    		   };
    		   var tooltip = {
    		      headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
    		      pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
    		         '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
    		      footerFormat: '</table>',
    		      shared: true,
    		      useHTML: true
    		   };
    		   var plotOptions = {
    		      column: {
    		         pointPadding: 0.1,
    		         borderWidth: 1
    		      }
    		   };  
    		   var credits = {
    		      enabled: false
    		   };
    		   
    		   var series= [{
    		        name: '天津局',
    		            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    		        }];     
    		      
    		   var json = {};   
    		   json.chart = chart; 
    		   json.title = title;   
    		   json.subtitle = subtitle; 
    		   json.tooltip = tooltip;
    		   json.xAxis = xAxis;
    		   json.yAxis = yAxis;  
    		   json.series = series;
    		   json.plotOptions = plotOptions;  
    		   json.credits = credits;
    		   $('#chartContainer').highcharts(json); */
    });
    
    //查询会议次数
    function queryMeetingCount(){
 	   var datas = {"timeRange":$("#timeRange").val(),"subflag":$("#subflag").val()};
 	   httpRequest("get","/zhbg/hygl/statistics/getCount",datas,function (data){
 			 $("#count").html(data.data);
 		});
     }
  //清空查询条件
	function clearAll(){
		$("#timeRange").val("");	//时间
	}
</script>
