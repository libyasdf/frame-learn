<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">

    <title></title>
    <link rel="stylesheet" type="text/css" href="/static/css/common/Loading.css">
    <link rel="stylesheet" href="/static/core/bootstrap/css/bootstrap.min.css"/>
    <link href="/static/core/bootstrap-table/bootstrap-table.css" rel="stylesheet" />
    <link rel="stylesheet" href="/static/core/bootstrapvalidator/dist/css/bootstrapValidator.min.css"/>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/static/core/html5/html5shiv.min.js"></script>
    <script src="/static/core/html5/respond.js"></script>
    <![endif]-->
    <link href="/static/css/common/style.css" rel="stylesheet"/>
    <link href="/static/css/common/form-public.css" rel="stylesheet"/>
</head>
<body class="formpage_bj">

    <!-- resId -->
    <input name="resId" id="resId" type="hidden" value="">
    <input name="dwxtOrgId" id="dwxtOrgId" type="hidden" value="">
    <div class="container-fluid formpage_area" style="margin-bottom: 140px">
        <form class="form-horizontal" id="form">
        <!-- 基本信息 -->
            <div class="row">
                <div class="col-md-12 ">
                    <div class="block_title">
                        <span class="name">基本信息</span>
                    </div>
                </div>
            </div>
            <div class="row m-t-15">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="" class="col-md-2 control-label"> 党组织编码：</label>
                        <div class="col-md-4 form-view">
                            <span name="orgId"></span>
                        </div>
                        <label for="" class="col-md-2 control-label"> 组织名称：</label>
                        <div class="col-md-4 form-view">
                            <span name="orgName"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-md-2 control-label"> 组织属性：</label>
                        <div class="col-md-4 form-view">
                            <span id="orgType" name="orgType"></span>
                        </div>
                        <label for="" class="col-md-2 control-label"> 建立日期：</label>
                        <div class="col-md-4 form-view">
                            <span name="creDate"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-md-2 control-label"> 党组织联系人：</label>
                        <div class="col-md-4 form-view">
                            <span name="contactMan"></span>
                        </div>
                        <label for="" class="col-md-2 control-label"> 党组织联系电话：</label>
                        <div class="col-md-4 form-view">
                            <span name="contactNumber"></span>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="row">
            <div class="col-md-12 ">
                <div class="block_title">
                    <span class="name">单位信息</span>
                </div>
            </div>
        </div>
        <div class="row m-t-15">
            <div class="col-md-12">
                <div class="list_button_area">
                    <button class="list_table_btn2" onclick="list.addUnit()">
                        <span class="glyphicon glyphicon-plus-sign"></span> 新增
                    </button>
                </div>
            </div>
            <div class="col-md-12">
                <!--bootstrap-table表格-->
                <table id="right_table"></table>
                <br/>
            </div>
        </div>
        <!-- 基本信息结束 -->
    </div>


<div class="form_btn_area" style="text-align: center;">
    <button class="btn btn-primary form_btn_area_btn2"  onclick="MyLayer.closeOpen()"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> 关闭</button>
</div>
<!-- 按钮区结束 -->
<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/core/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/static/core/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="/static/core/bootstrapvalidator/dist/js/bootstrapValidator.min.js"></script>
<script src="/static/core/layer/layer.js"></script>
<script src="/static/js/common/mylayer.js"></script>
<script src="/static/core/laydate/laydate.js"></script>
<script type="text/javascript" src="/static/js/common/assistUtil.js"></script>

<script type="text/javascript" src="/common/js/commonFunction.js"></script>
<script type="text/javascript" src="/static/js/common/tablelist.js"></script>

<!-- 获取cookie值 -->
<script type="text/javascript" src="/product/workflow/js/common/getCook.js"></script>
<!-- 页面获取参数 -->
<script type="text/javascript" src="/common/js/getrequest.js"></script>
<!-- 引入自己模块功能的js -->
<script type="text/javascript" src="/modules/dwgl/dzz/dzzgl/js/dwglList.js"></script>

<script type="text/javascript" src="/modules/dwgl/dzz/dzzgl/js/dwglEditValidator.js"></script>

<!-- 数据回显 -->
<script type="text/javascript" src="/static/js/common/displayData.js"></script>
<!--点击折叠展开-->
<script type="text/javascript" src="/static/js/common/toggle.js"></script>
<script type="text/javascript">

    var unitBelongMap = Dictionary.getNameAndCode({mark:"dwgl_unitBelong",type:"1"});
    var unitAttrMap = Dictionary.getNameAndCode({mark:"dwgl_unitAttr",type:"1"});
    var tradeMap = Dictionary.getNameAndCode({mark:"dwgl_trade",type:"1"});

    var resource = {
        resId : $('#left_ul').find('a.active').attr("id")
    }

    //定义bootatrap-table数据列
    //sortable：开启列排序，其他参考API
    var right_table_col = [{
        title: '序号'
        , width: '5%'
        , order: "desc"
        , align: "center"
        , formatter: function (value, row, index) {
            return index + 1;//计算序号
        }
    }, {
        field: 'unitName'
        , title: '单位名称'
        , width: '12%'
        , align: "center"
        , formatter: function (value, row, index) {
            var val = value;
            if(value!=null&&value.length>6){
                val = val.substring(0,6)+"...";
            }
            if(value==null){
                val="-";
            }
            return "<span title='"+value+"'>" + val + "</span>";
        }
    }, {
        field: 'unitBelong'
        , title: '单位隶属关系'
        , width: '12%'
        , align: "center"
        ,formatter:function (value,row,index) {
            return unitBelongMap[value];
        }
    }, {
        field: 'unitAttr'
        , title: ' 单位属性'
        , width: '12%'
        , align: "center"
        ,formatter:function (value,row,index) {
            return unitAttrMap[value];
        }
    }, {
        field: 'trade'
        , title: '所属行业'
        , width: '12%'
        , align: "center"
        ,formatter:function (value,row,index) {
            return tradeMap[value];
        }

/*    }, {
        field: 'workersNumber'
        , title: '在岗职工数'
        , width: '12%'
        , align: "center"
    }, {
        field: 'youngWorkersNumber'
        , title: '35岁以下在岗职工数'
        , width: '12%'
        , align: "center"
    }, {
        field: 'skillWorkers'
        , title: '在岗职工中工勤技能人员数'
        , width: '15%'
        , align: "center"
    },{
        field: 'majorWorkers'
        , title: '在岗专业技术人员数'
        , width: '15%'
        , align: "center"*/
    },{
        field: 'cz'
        ,title: '操作'
        , width: '12%'
        , align: "center"
        , formatter: function (value, row, index) {  //直接定义function,return就是html代码
            var html = "";
            html += "<i title='修改' class='glyphicon glyphicon-edit' onclick=\'list.editFun(\"" + row.id + "\")\'></i>&nbsp;&nbsp;"
            html += "<i title='删除' class='glyphicon glyphicon-trash' onclick=\'list.deleteFun(\"" + row.id + "\")\'></i>";
            return html;
        }
    }];


    //表格数据项的操作
    var list = {
        addUnit: function () {
            var theRequest = GetRequest();
            var orgType = theRequest.orgType;
            var dwxtOrgId = $("#dwxtOrgId").val();
            MyLayer.layerOpenUrl({
                url: '/modules/dwgl/dzz/dzzgl/dwglEditForm.html?resId='+resource.resId+'&dwxtOrgId='+dwxtOrgId+'&orgType='+orgType,
                title: "新增"
            })
        },
        editFun: function (id) {
            var theRequest = GetRequest();
            var orgType = theRequest.orgType;
            var dwxtOrgId = $("#dwxtOrgId").val();
            MyLayer.layerOpenUrl({
                url: '/modules/dwgl/dzz/dzzgl/dwglEditForm.html?resId='+resource.resId+'&id=' + id+'&dwxtOrgId='+dwxtOrgId+'&orgType='+orgType,
                title: "修改"
            })
        },
        deleteFun: function (id) {
            MyLayer.deleteOpt({
                url: '/djgl/ddjs/dzz/dzzgl/deleteUnit?resId='+resource.resId+'&id=' + id,
                tableId: 'right_table'
            })
        }

    }

    //刷新方法
    function refreshPage(){
        TableInit.refTable("right_table");
    }

</script>
</body>
</html>
