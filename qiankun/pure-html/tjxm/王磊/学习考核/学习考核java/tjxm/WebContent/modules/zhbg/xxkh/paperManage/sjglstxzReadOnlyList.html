<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Expires" content="0">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Cache-control" content="no-cache">
	<meta http-equiv="Cache" content="no-cache">
    <title>表单页面</title>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/static/core/html5/html5shiv.min.js"></script>
    <script src="/static/core/html5/respond.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="/static/core/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/core/bootstrap-table/bootstrap-table.min.css"/>
    <link href="/static/css/common/style.css" rel="stylesheet"/>
    <link href="/static/css/common/form-public.css" rel="stylesheet"/>
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="/static/core/jquery-fileupload/css/jquery.fileupload.css">
    <link rel="stylesheet" href="/static/font/iconfont.css">
	<style type="text/css">
		td{
			cursor: default;
		}
	
	</style>
</head>

<body class="formpage_bj">

<input type="hidden" id="id" value="">
<div class="container-fluid formpage_area">
    <div class="form-horizontal">
        <div class="row">
            <div class="col-md-12 ">
                <div class="block_title">
                    <span class="name">试卷试题</span>
                </div>
            </div>
        </div>

        <div class="row m-t-15">
            <div class="col-md-12">
                <table id="right_table">
                </table>
            </div>
        </div>
    </div>
</div>

<!-- 按钮区 -->
<div class="form_btn_area" style="text-align: center;">
   <button id="preserveBtn" class="btn btn-primary form_btn_area_btn2" onclick="MyLayer.closeOpen();" ><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> 关闭</button>
</div>
<!-- 按钮区结束 -->

<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/core/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/static/core/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="/static/core/layer/layer.js"></script>
<script src="/static/js/common/url.js"></script>
<script src="/static/js/common/mylayer.js"></script>
<script src="/static/js/common/tablelist.js"></script>
<!-- 页面常量配置config.js -->
	<script type="text/javascript" src="/common/js/config.js"></script>
<!-- 页面获取参数 -->
<script type="text/javascript" src="/common/js/getrequest.js"></script>
<script type="text/javascript">

    //定义bootatrap-table数据列
    //    sortable：开启列排序，其他参考API
    var right_table_col = [{
        field: "id"
        , width: "8%"
        , title: "序号"
        , align: "center",
		formatter : function(value, row, index) {
			var pageSize = $('#right_table').bootstrapTable('getOptions').pageSize;//通过表的#id 可以得到每页多少条
			var pageNumber = $('#right_table').bootstrapTable('getOptions').pageNumber;//通过表的#id 可以得到当前第几页
			var orderNum = pageSize * (pageNumber - 1) + index + 1;//计算序号
			return "<span recordId='"+row.id+"'>" + orderNum + "</span>";//计算序号
		}
    }, {
        width: "30%"
        , field: "describe"
        , title: "题干"
        , align: "center",
		formatter : function(value, row, index) {
			var title = value;
			if (value != null) {
				var length = value.length
				var val = '';
				if (length > 12) {
					val = value.substring(0, 12) + "...";
				} else {
					val = value;
				}
				return "<span title ='"+title+"' data-content='"+value+"'>" + val + "</span>";
			} else {
				return "";
			}
		}
    }, {
        width: "15%"
        , field: "difficultyLevel"
        , title: "难易程度"
        , align: "center",
		formatter : function(value, row, index) {
			if (Config.jianDan == value) {
				value = "简单";
			} else if (Config.yiBan == value) {
				value = "一般";
			} else if (Config.kunNan == value) {
				value = "困难";
			}
			return "<span data-id='"+row.id+"'>" + value + "</span>";
		}
    }, {
        width: "12%"
        , field: "creUserName"
        , title: "创建人"
        , align: "center"
    }, {
        width: "25%"
        , field: "creTime"
        , title: "创建时间"
        , align: "center"
    }
//    , {
//        title: "操作"
//        , formatter: function addInput(value, row, index) {
//            return "<i class='glyphicon glyphicon-edit' title='选择试题' onclick=\'sjglEditFormBtn.sjstEdit(" + row.id + ")\'></i>&nbsp;&nbsp;";// +
//            // "<i class='glyphicon glyphicon-trash' title='删除' onclick=\'sjglEditFormBtn.sjstDelete(" + row.id + ")\'></i>";
//        }
//    }
    ];

    $(document).ready(function (e) {
    	var theRequest = GetRequest();
    	$("#id").val(theRequest.id);
    	var groupId=theRequest.id;
        //初始化表格
        TableInit.init({
            domId: "right_table",
            url: "/zhbg/xxkh/questionandgroup/list?questionGroupId="+groupId,
            columns: right_table_col,//,,
//            queryParams: function (params) {
//                //这里将各个查询项添加到要传递的参数中
////                可以做一些校验
//                params.stmc = $('#stmc').val();
//                params.stlb = $('#stlb').val();
//                params.nycd = $('#nycd').val();
//                return params;
//            }//,
         readOnlyFn: function () {
        	 $('tr.readOnly').find("td").css("cursor","default")
//             $('tr.readOnly').find('td:not(:last)').unbind('click').bind('click', function (e) {
// //                    取消事件冒泡
//                 var evt = e ? e : window.event;
//                 if (evt.stopPropagation) {
//                     evt.stopPropagation();
//                 } else {
//                     evt.cancelBubble = true;
//                 }
// //                    取消事件冒泡 end
//                 MyLayer.layerOpenUrl({
//                     url: '/modules/zhbg/xxkh/stgl/stglReadOnlyForm.html',
//                     title: '只读',
//                     width: '70%',
//                     height: '70%'
//                 });
//             });
        }
        });
    });

    //    表格数据项的操作按钮处理
    var list = {
        editFun: function (id) {
            //这里是勾选试题的处理方法
            layer.msg("试题" + id + "已勾选！");
        }
    };


    var sjglReadOnly = function () {
        var arg = {
            url: "",
            title: ""
        };
        var viewsj = function (json) {
            var _arg = $.extend(arg, json);
            MyLayer.layerOpenUrl({
                url: _arg.url, //这里填写选择试题的页面
                title: _arg.title
            });
        };
        return {
            viewsj: function (json) {
                viewsj(json);
            }
        }
    }();
    //    $(document).ready(function () {
    //        // 加载数据
    //        $.getJSON("/mock/zhbg/xxkh/sjgl/readOnlyForm.json", function (data) {
    //            PageEcho.parseData({
    //                data: data,
    //                tableFun: function (key, json) {
    //                    var data = json.data;
    //                    var html = [];
    //                    for (var i = 0; i < data.length; i++) {
    //                        html.push('<tr>');
    //                        html.push('<td class="text-center" >' + data[i].stmc + '</td>');
    //                        html.push('<td class="text-center" >' + data[i].nycd + '</td>');
    //                        html.push('<td class="text-center" >' + data[i].tixing + '</td>');
    //                        html.push('<td class="text-center" >' + data[i].cjr + '</td>');
    //                        html.push('<td class="text-center" >' + data[i].cjsj + '</td>');
    ////                        html.push('<td class="text-center">');
    ////                        html.push('<i class=\'iconfont icon-browse\' title=\'查看试题\' ' +
    ////                            'onclick=\'sjglReadOnly.viewsj({url:"/modules/zhbg/xxkh/sjgl/sjglstxzReadOnlyList.html?id=' + data[i].id + '",title:"查看试题"})\'></i>');
    ////                        html.push('</td>');
    //                        html.push('</tr>');
    //                    }
    //                    $('[name=' + key + ']').find('tbody').empty().append(html.join(''));
    //                }
    //            });
    //        });
    //    })
</script>
</body>
</html>
 