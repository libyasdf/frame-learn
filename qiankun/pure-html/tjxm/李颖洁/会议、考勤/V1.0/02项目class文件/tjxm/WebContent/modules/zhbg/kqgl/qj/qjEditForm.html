<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta http-equiv="Expires" content="0">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-control" content="no-cache">
<meta http-equiv="Cache" content="no-cache">

<title>企业中心</title>
<link rel="stylesheet" type="text/css" href="/static/css/common/Loading.css">
<link rel="stylesheet"
	href="/static/core/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet"
	href="/static/core/bootstrapvalidator/dist/css/bootstrapValidator.min.css" />
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="/static/core/html5/html5shiv.min.js"></script>
    <script src="/static/core/html5/respond.js"></script>
    <![endif]-->
<link href="/static/css/common/style.css" rel="stylesheet" />
<link href="/static/css/common/form-public.css" rel="stylesheet" />
<!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
<link rel="stylesheet"
	href="/static/core/jquery-fileupload/css/jquery.fileupload.css">
<link rel="stylesheet" href="/static/font/iconfont.css">
</head>

<body class="formpage_bj">
	<form class="form-horizontal" id="form">
		<!-- 流程字段-->
		<input name="id" id="id" type="hidden" value="" />
		<!-- 工作项ID -->
		<input name="ideaName" id="ideaName" type="hidden" value="" />
		<!-- 当前用户意见域名称 -->
		<input name="subflag" id="subflag" type="hidden" value="" />
		<!-- 流程状态 -->
		<input name="filetypeid" id="filetypeid" type="hidden" value="" />
		<!-- 流程ID -->
		<input name="workFlowId" id="workflowid" type="hidden" value="" />
		<!-- 流程唯一ID -->
		<input name="workitemid" id="workitemid" type="hidden" value="" />
		<!-- 待办工作项ID -->
		<input name="opertation" id="opertation" type="hidden" value="" /> <input
			type="hidden" id="deptId" name="deptId" value="" />
		<!-- 部门id隐藏域 -->
		<input type="hidden" id="fillmode" name="fillmode" value="2">
		<input type="hidden" id="resId" name="resId" />
		<!--保存当前登录人的角色信息-->
		<input type="hidden" id=ifzkz name="ifzkz" />
		<input type="hidden" id=iffkz name="iffkz" />
		<input type="hidden" id="ifzcz" name="ifzcz" />
		<input type="hidden" id="iffcz" name="iffcz" />
		<input type="hidden" id="ifjz" name="ifjz" />
		<!--起草人角色信息-->
		<input type="hidden" id=creUserRoleNo name="creUserRoleNo" />
		<!-- 操作方法 -->
		<!-- 流程字段结束-->
		<div class="container-fluid formpage_idea">
			<div class="gw_form_block">
				<div class="gw_form_block_title">流程信息</div>
				<div class="gw_form_block_main">
					<table width="90%" border="0" cellspacing="0" cellpadding="0"
						class="gw_form_block_table">
						<tbody>
							<tr>
								<td width="15%" class="text-right">节点操作提示：</td>
								<td width="85%" id="flowMemo"></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div class="gw_form_block">
				<div class="gw_form_block_title"
					onclick="showTable('yjxxTable','showOrHideImg');">
					意见信息 <img align="right" style="margin-top: 10px"
						src="/static/images/icon7_down.gif" hspace="0" id="showOrHideImg" />
				</div>
				<!--<div class="dh-left col-xs-1" style="width: 50px" onclick="showTable('yjxxTable','showOrHideImg');"></div>-->
				<div class="gw_form_block_main" id="yjxxTable">
					<div class="table_body-wrapper">
						<table class="table table-hover table-reset js-disk-row"
							style="border: 0px">
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<!-- 基本信息 -->
		<div class="container-fluid formpage_area"
			style="margin-bottom: 140px">
			<div class="row">
				<div class="col-md-12 ">
					<div class="block_title">
						<span class="name">基本信息</span>
					</div>
				</div>
			</div>
			<div class="row m-t-15">
				<div class="col-md-12">
					 <div class="form-group">
					   <!-- <div class="rowGroup">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 标题：</label>
						<div class="col-md-10">
							<input type="text" class="form-control" id="leaveTitle"
								name="leaveTitle" placeholder="标题">
						</div>
						</div> -->
					</div> 
					<div class="form-group">
						<label for="" class="col-md-2 control-label"> 申请人：</label>
						<div class="col-md-4">
						  <input type="hidden" id="leaveTitle" name="leaveTitle" >
							<input type="hidden" id="creUserId" name="creUserId"> <input
								type="text" class="form-control" id="creUserName"
								name="creUserName" readonly="readonly" placeholder="申请人">
						</div>
						<label for="" class="col-md-2 control-label"> 单位：</label>
						<div class="col-md-4">
							<input type="hidden" id="applicantUnitId" name="applicantUnitId">
							<input type="text" class="form-control" id="applicantUnitName"
								name="applicantUnitName" readonly="readonly" placeholder="单位">
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-md-2 control-label"> 申请时间：</label>
						<div class="col-md-4">
							<input type="text" name="applicationTime" class="form-control"
								readonly="readonly" id="applicationTime"
								placeholder=" ">
						</div>
						<!-- <div class="rowGroup">
						<label for="" class="col-md-2 control-label"> 请假时间类型：</label>
						<div class="col-md-4" id="judTimeType">
							<label class="radio-inline"> <input type="radio"
								id="leaveTimeType" name="leaveTimeType" value="0"
								checked="checked"> 按天数
							</label> <label class="radio-inline"> <input type="radio"
								id="leaveTimeType" name="leaveTimeType" value="1"> 按小时
							</label>
						</div>
						</div> -->

					</div>

					<div class="form-group" id="qjStartDate">
					    <div class="rowGroup">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 请假开始日期：</label>
						<div class="col-md-4">
						<!--日期控件readonly无法控制   disabled无法保存数据库 使用隐藏域解决  -->
						 <input type="text" style="display:none" readonly class="form-control" name="leaveStartDate1" id="leaveStartDate1">
						 <input type="text" name="leaveStartDate" class="form-control"
								id="leaveStartDate" placeholder="请假开始日期" autocomplete="off">
						</div>
						</div>
						<div class="rowGroup">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 上午下午：</label>
						<div class="col-md-4">
						  <input type="text" style="display:none" readonly class="form-control" name="startAmOrPm1" id="startAmOrPm1">
							<select class="form-control" name="startAmOrPm" id="startAmOrPm"
								onchange="change('startAmOrPm')">
								<option value="">--请选择--</option>
								<option value="1">上午</option>
								<option value="0">下午</option>
							</select>
						</div>
						</div>
					</div>
					<div class="form-group" id="qjEndDate">
					    <div class="rowGroup">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 请假结束日期：</label>
						<div class="col-md-4">
						    <input type="text" style="display:none" readonly class="form-control" name="leaveEndDate1" id="leaveEndDate1">
							<input type="text" name="leaveEndDate" class="form-control"
								id="leaveEndDate" placeholder="请假结束日期" autocomplete="off">
						</div>
						</div>
						<div class="rowGroup">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 上午下午：</label>
						<div class="col-md-4">
						   <input type="text" style="display:none" readonly class="form-control" name="endAmOrPm1" id="endAmOrPm1">
							<select class="form-control" name="endAmOrPm" id="endAmOrPm"
								onchange="change('startAmOrPm')">
								<option value="">--请选择--</option>
								<option value="1">上午</option>
								<option value="0">下午</option>
							</select>
						</div>
						</div>
					</div>

					<div class="form-group" id="sedTime" style="display: none">
					    <div class="rowGroup">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 请假开始时间：</label>
						<div class="col-md-4">
							<input type="text" name="leaveStartTime" autocomplete="off"
								class="form-control" id="leaveStartTime" placeholder="请假开始时间">
						</div>
						</div>
						
						<div class="rowGroup">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 请假结束时间：</label>
						<div class="col-md-4">
							<input type="text" name="leaveEndTime" class="form-control"
								id="leaveEndTime" placeholder="请假结束时间" autocomplete="off">
						</div>
						</div>

					</div>

					<div class="form-group">
					  <div class="rowGroup">
						<label for="" class="col-md-2 control-label" id="qjLongTypeTxt"><b
							style="color: red;">*</b> 请假时长(d)：</label>
						<div class="col-md-4">
							<input type="text" class="form-control" id="leaveLongTime"
								name="leaveLongTime" readonly placeholder="请假时长" autocomplete="off">
						</div>
					   </div>
					   <div class="rowGroup">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 请假类型：</label>
						<div class="col-md-4">
							<select class="form-control" id="leaveType" name="leaveType">
							</select>
						</div>
					   </div>
					</div>

					<!-- <div class="form-group">
					<div class="rowGroup">
						<label for="" class="col-md-2 control-label"> 是否倒休：</label>
						<div class="col-md-4" id="isLeaveInLieu"></div>
						</div>
						<div id="isLeaveInLieuCondition" style="display:none">
						<label for="" class="col-md-2 control-label"><b
							style="color: red;">*</b> 倒休情况：</label>
						<div class="col-md-4" id="recuperateId">
						 <span id="recuperateId">fsd</span>
						</div>
						</div>
					</div> -->

					<div class="form-group">
					<div class="rowGroup">
						<label for="" class="col-md-2 control-label">请假事由：</label>
						<div class="col-md-10">
							<textarea id="leaveReason" name="leaveReason"
								class="form-control" rows="3"></textarea>
						</div>
						</div>
					</div>
				</div>
			</div>
			<!-- 基本信息结束 -->
		</div>
	</form>
	<!-- 意见域显示 Start-->
	<div class="container-fluid gw_form_bottom_yijian" id="ideaArea"
		style="display: none; margin-bottom: 50px;">
		<table width="100%" border="0" cellspacing="0" cellpadding="0"
			class="gw_form_bottom_table  mt_10">
			<tr>
				<td width="15%" class="title">我的意见：</td>
				<td width="85%">
					<table>
						<tr>
							<td rowspan="2" width="90%">
							    <textarea name="textarea" id="idea" cols="45" rows="3" placeholder="意见最多填写200字"
                                          class="form_textarea" style="width: 100%;" onkeyup="this.value = this.value.substring(0,200)"></textarea>
                                <span id="idea-count" value="">0</span>/200
							</textarea>
							</td>
							<td width="10%"><select class="btn btn-default"
								name="CuOpinion" id="CuOpinion"
								onchange="onSelect(this.value,'idea')"></select></td>
						</tr>
						<tr>
							<td><a class="white" href="#" onclick="add('idea')">+添加常用意见</a></td>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</div>
	<!-- 意见域显示 end-->

	<!-- 按钮区 -->
	<div class="gw_form_right_btn_area"
		style="right: 10px; top: 20px; position: fixed;">
		<ul>
			<li><a href="#" onclick="openLayer('1')"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> 流程记录</a></li>
			<li><a href="#" onclick="openLayer('2')"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> 流程图</a></li>
			<li><a href="#" onclick="openLayer('3')"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 意见信息</a></li>
		</ul>
	</div>
	<div class="form_btn_area" style="text-align: center;">
		<button id="save" class="btn btn-primary form_btn_area_btn2"
			style="display:none" onclick="commitForm();">
			<span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>
			保存
		</button>
		<button id="subflow" class="btn btn-primary form_btn_area_btn2"
			style="display:none" onclick="comitFlow();">
			<span class="glyphicon glyphicon-send" aria-hidden="true"></span> 发送
		</button>
		<button id="approval" class="btn btn-primary form_btn_area_btn2"
			style="display: none" 
			onclick="completeFlow('',Config.approvalflag)">
			<span class="glyphicon glyphicon-ok" aria-hidden="true"></span> 通过
		</button>
	    <button id="noApproval" class="btn btn-primary form_btn_area_btn2"
			style="display: none"
			onclick="completeFlow('',Config.noApprovalflag);">
			<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
			不通过
		</button> 
		<button id="remove" class="btn btn-primary form_btn_area_btn2"
			style="display: none" onclick="removeFlow()">
			<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
			撤办
		</button>
		<button id="resumeFlow" class="btn btn-primary form_btn_area_btn2"
			style="display: none" onclick="resumeFlow()">
			<span class="glyphicon glyphicon-repeat" aria-hidden="true"></span>
			重新启用
		</button>
		<button id="takeBack" class="btn btn-primary form_btn_area_btn2"
			style="display: none" onclick="takeBack()">
			<span class="glyphicon glyphicon-repeat" aria-hidden="true"></span>
			收回重用
		</button>
	</div>
	<!-- 按钮区结束 -->
	<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
	<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>
	<script src="/static/core/bootstrap-table/bootstrap-table.min.js"></script>
	<script
		src="/static/core/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
	<script
		src="/static/core/bootstrapvalidator/dist/js/bootstrapValidator.min.js"></script>
	<script src="/static/core/layer/layer.js"></script>
	<!-- <script src="/static/js/common/url.js"></script> -->
	<script src="/static/js/common/mylayer.js"></script>
	<script src="/static/core/laydate/laydate.js"></script>
	<script type="text/javascript" src="/static/js/common/assistUtil.js"></script>

	<!--文件上传js-->
	<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
	<script
		src="/static/core/jquery-fileupload/js/vendor/jquery.ui.widget.js"></script>
	<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
	<script
		src="/static/core/jquery-fileupload/js/jquery.iframe-transport.js"></script>
	<!-- The basic File Upload plugin -->
	<script src="/static/core/jquery-fileupload/js/jquery.fileupload.js"></script>
	<script src="/static/js/common/myfilupload.js"></script>
	<!--文件上传js end-->
	<!-- 引入自己模块功能的js -->
	<script type="text/javascript" src="js/qjEditForm.js"></script>
	<!-- 数据回显 -->
	<script type="text/javascript" src="/static/js/common/displayData.js"></script>
	<!-- 流程相关 -->
	<script type="text/javascript" src="/common/js/config.js"></script>
	<script type="text/javascript" src="/product/workflow/js/storages.js"></script>
	<script type="text/javascript" src="/common/js/commonFunction.js"></script>
	<!-- 获取cookie值 -->
	<script type="text/javascript"
		src="/product/workflow/js/common/getCook.js"></script>
	<!-- 页面获取参数 -->
	<script type="text/javascript" src="/common/js/getrequest.js"></script>
	<!--点击折叠展开-->
	<script type="text/javascript" src="/static/js/common/toggle.js"></script>
	<!-- 数据校验 -->
	<script type="text/javascript" src="js/validator.js"></script>
	<!-- 自定义意见(最后进行加载) -->
	<script type="text/javascript" src="/common/html/notion/notion.js"></script>
	<script type="text/javascript">
		scrollTop.init();
		 var startDate = laydate.render({
	 			elem: '#leaveStartDate' //指定元素
	 			,type:'date'
	 			,done: function(value, datas){
	 				endDate.config.min = {
	 						year:datas.year,
	 						month:datas.month-1,
	 						date:datas.date,
	 						hours:0,
	 						minutes:0,
	 						secondes:0
	 				}
	 				$('#leaveStartDate').val(value).change();
	 				change("leaveStartDate")
	 			}
				});
		var endDate = laydate.render({
								elem: '#leaveEndDate' //指定元素
								,type:'date'
								,done: function(value, datas){
									startDate.config.max = {
			        						year:datas.year,
			        						month:datas.month-1,
			        						date:datas.date,
			        						hours:0,
			        						minutes:0,
			        						secondes:0
			        				}
							    	$('#leaveEndDate').val(value).change();
									change("leaveEndDate")
								}
						});
		
		//按时间请假  绑定日期输入input
		/* var startTime=laydate.render({
					elem : '#leaveStartTime', //指定元素
					type : 'datetime',
					done : function(value, date, endDate) {
						$('#leaveStartTime').val(value).change();
						$("#form").data('bootstrapValidator').updateStatus("leaveStartTime","notEmpty", null).validateField("leaveStartTime");
						endTime.config.min = {
								year:date.year,
		 						month:date.month-1,
		 						date:date.date,
		 						hours:date.hours,
		 						minutes:date.minutes,
		 						seconds:date.seconds
		 				}
						
						/* var qjEndTime = $("#leaveEndTime").val();
						if (qjEndTime != "" && qjEndTime != null) {
							if (qjEndTime < value) {
								layer.msg("请假开始时间不能大于请假结束时间", {
									icon : 0
								});
								$("#leaveStartTime").val("");
								$("#leaveLongTime").val("");
								return;
							}
							//判断是不是同一天
							if (ifOneDay(qjEndTime, value)) {
								//计算请假的小时数
								var data = (new Date(Date.parse(qjEndTime))
										.getTime() - new Date(Date.parse(value))
										.getTime()) / 1000 / 60 / 60;
								$("#leaveLongTime").val(data.toFixed(2));
							} else {
								layer.msg("按时间请假需是同一天", {
									icon : 0
								});
								$("#leaveLongTime").val("");
							}
						} */
			//	} 
			//}); */
		/* var endTime=laydate.render({
					elem : '#leaveEndTime', //指定元素
					type : 'datetime',
					done : function(value, date, endDate) {
						$('#leaveEndTime').val(value).change();
						$("#form").data('bootstrapValidator').updateStatus("leaveEndTime","notEmpty", null).validateField("leaveEndTime");
						startTime.config.max = {
		 						year:date.year,
		 						month:date.month-1,
		 						date:date.date,
		 						hours:date.hours,
		 						minutes:date.minutes,
		 						seconds:date.seconds
		 				}
						
						/* var qjStartTime = $("#leaveStartTime").val();
						if (qjStartTime != "" && qjStartTime != null
								&& typeof qjStartTime != undefined) {
							if (qjStartTime > value) {
								layer.msg("请假开始时间不能大于请假结束时间", {
									icon : 0
								});
								return;
							}
							if (ifOneDay(qjStartTime, value)) {
								//计算请假的小时数
								var data = (new Date(Date.parse(value))
										.getTime() - new Date(Date
										.parse(qjStartTime)).getTime()) / 1000 / 60 / 60;
								$("#leaveLongTime").val(data.toFixed(2));
							} else {
								layer.msg("按时间请假需是同一天", {
									icon : 0
								});
								$("#leaveLongTime").val('');
							}
						} */
				//	} 
			//	}); */
		
		$('#judTimeType').change(function() {
			var oper = $("#opertation").val();
			changediv(oper);
		});
		$("#leaveLongTime").change(function(){
			var data = $("#leaveLongTime").val();
			btnChangeByLeaveLongTime(data);
		});
		
	 /* $(document).ready(function() {
		 //判断下按钮式否选中  编辑页面 调休情况不显示
		$('input[type=radio][name=isLeaveInLieu]').change(function() {
				if (this.value == '0') {
					$('#isLeaveInLieuCondition').css("display","none");//将出差费用设置为隐藏 
				} else if (this.value == '1') {
					if($('#leaveStartDate').val()||$('#leaveStartTime').val()){
					 isLeaDetail($('#leaveStartDate').val(),$('#leaveStartTime').val(),$("#leaveLongTime").val());
					}else{
					 layer.msg("请选择请假时间或日期",{icon: 2});
					 $("input[type=radio][name=isLeaveInLieu]:eq(1)").trigger("click");
					}
					
				}
			});
		}); */ 
	</script>
</body>
</html>
