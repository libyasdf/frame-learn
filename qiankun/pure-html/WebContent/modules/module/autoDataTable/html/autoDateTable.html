<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>layui</title>

    <!-- Bootstrap -->
    <!--<link rel="stylesheet" type="text/css" href="/static/core/bootstrap/css/bootstrap.css">
    <link href="/manage/bootstrap/css/bootstrap-select.min.css" rel="stylesheet" />-->
    <link rel="stylesheet" href="/manage/layui/dist/css/layui.css">

	<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
	<!--<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>-->
    <script src="/manage/layui/dist/layui.js"></script>

    <!--让IE8/9支持媒体查询，兼容栅格布局-->
    <script src="/static/core/html5/html5shiv.min.js"></script>
    <script src="/static/core/html5/respond.js"></script>
    <!--树状图
    <link rel="stylesheet" href="/static/core/zTree_v3/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <script src="/static/core/zTree_v3/js/jquery.ztree.all.min.js"></script>-->

<!--<link rel="stylesheet" href="/static/core/layui/css/layui.css">
<link rel="stylesheet" href="/manage/layui/dist/css/layui.css">
<script src="/static/core/layui/lay/modules/element.js"></script>
<script src="/static/core/layui/layui.all.js"></script>
 <script src="/manage/layui/dist/layui.js"></script>-->
    <!--<script src="/static/core/layui/layui.js"></script>document.currentScript失效!因为load是回调函数-->

	<style>

	</style>

  </head>
<body>


	<blockquote class="layui-elem-quote">
        <div class="layui-row">
            <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 laytable-cell-space">
                <h2>xxxxxx详情</h2>
            </div>
            <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 laytable-cell-space">
                <span>已签订个数:</span><span>5个</span>
            </div>
        </div>
    </blockquote>


    <fieldset class="layui-elem-field layui-field-title" style="margin-bottom: 10px; width: auto;">
        <legend style="width:auto;margin-bottom: 0px;margin-left: 26px;">各部门签订详情</legend>
    </fieldset>

    <div id="responsibilityTable">
    </div>


</body>

<script>
    (function(){
        layui.use(['element', 'layer'], function(){        });
        var data=[{ //模拟数据
            name:'XX局',
            value:{},
            staff:[{//当前部门下的直系人员
                name:'李各',
                value:{}
            },{
                name:'刘苏',
                value:{}
            }],
            children:[{
                name:'人事部',
                value:{},
                staff:[{//当前部门下的直系人员
                    name:'孙非',
                    value:{}
                },{
                    name:'赵思佳',
                    value:{}
                }],
                children:[]
            },{
                name:'人事二部',
                value:{},
                staff:[{//当前部门下的直系人员
                    name:'刘个',
                    value:{}
                },{
                    name:'可安',
                    value:{}
                }],
                children:[]
            }]
        }]
        function f(listmap,beal) {
            //debugger;
            var htmlStr='<div class="layui-collapse" lay-accordion>\n';
            $(listmap).each(function(index,item){
                htmlStr+='<div class="layui-colla-item">\n' +
                            '<h2 class="layui-colla-title">'+item.name+'</h2>\n' +
                            '<div class="layui-colla-content';
                                if(beal){//是否展开
                                    htmlStr+=' layui-show">';
                                }else{
                                    htmlStr+='">';
                                }
                                if(item.staff&&item.staff.length>0){
                                    htmlStr+="\t<table class=\"layui-table\">\n" +
                                        "      <tbody>\n" +
                                        "        <tr>\n" +
                                        "          <td>\n" +
                                        "            <div class=\"layui-table-cell\">贤心1</div>\n" +
                                        "          </td>\n" +
                                        "          <td>\n" +
                                        "            <div class=\"layui-table-cell\">66</div>\n" +
                                        "          </td>\n" +
                                        "          <td>\n" +
                                        "            <div class=\"layui-table-cell\">人生就像是一场修行a</div>\n" +
                                        "          </td>\n" +
                                        "        </tr>\n" +
                                        "      </tbody>\n" +
                                        "    </table>";
                                   // htmlStr+=f(item.staff);
                                }
                                if(item.children&&item.children.length>0){
                                    htmlStr+=f(item.children,false);
                                }
                    htmlStr+='</div>\n';
                htmlStr+='</div>\n' ;
            });
            htmlStr+='</div>';
            return htmlStr;
        }

        function init(){
            debugger;
            $("#responsibilityTable").html(f(data,true));
        }
        init();
    })();
</script>


</html>