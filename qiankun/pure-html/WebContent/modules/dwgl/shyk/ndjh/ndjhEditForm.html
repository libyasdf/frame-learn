<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">

    <title></title>
    <link rel="stylesheet" type="text/css" href="/static/css/common/Loading.css">
    <link rel="stylesheet" href="/static/core/bootstrap/css/bootstrap.min.css"/>
    <link href="/static/core/bootstrap-table/bootstrap-table.css" rel="stylesheet" />


    <link rel="stylesheet" href="/static/core/bootstrapvalidator/dist/css/bootstrapValidator.min.css"/>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/static/core/html5/html5shiv.min.js"></script>
    <script src="/static/core/html5/respond.js"></script>
    <![endif]-->
    <link href="/static/css/common/style.css" rel="stylesheet"/>
    <link href="/static/css/common/form-public.css" rel="stylesheet"/>
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="/static/core/jquery-fileupload/css/jquery.fileupload.css">
    <link rel="stylesheet" href="/static/font/iconfont.css">
</head>
<body class="formpage_bj">
<form class="form-horizontal" id="form">
    <!-- resId -->
    <input name="resId" id="resId" type="hidden" value="">
    <!-- 流程字段-->
    <input name="id" id="id" type="hidden" value=""/><!-- 工作项ID -->
    <input name="ideaName" id="ideaName" type="hidden" value=""/><!-- 当前用户意见域名称-->
    <input name="subflag" id="subflag" type="hidden" value="0"/><!-- 流程状态 -->
    <input name="filetypeid" id="filetypeid" type="hidden" value=""/><!-- 流程ID -->
    <input name="workFlowId" id="workflowid" type="hidden" value=""/><!-- 流程唯一ID -->
    <input name="workitemid" id="workitemid" type="hidden" value=""/><!-- 待办工作项ID -->
    <input name="opertation" id="opertation" type="hidden" value=""/><!-- 操作方法 -->
    <input type="hidden" id="deptId" name="deptId" value="" /><!-- 部门id隐藏域 -->
    <input type="hidden" id="fillmode" name="fillmode"value="2">
    <input type="hidden" id="title" name="title"value=""><!-- 待办标题-->
    <input type="hidden" id="partyOrganizationName" name="partyOrganizationName"value=""><!-- 党组织名称-->
    <input type="hidden" id="partyOrganizationId" name="partyOrganizationId"value=""><!-- 党组织ID-->
    <input type="hidden" id="annual" name="annual"value=""><!-- 年度-->
    <input type="hidden" id="reportingTime" name="reportingTime"value=""><!-- 上报时间-->
    <!-- 流程字段结束 -->
    <div class="container-fluid formpage_idea">
        <div class="gw_form_block">
            <div class="gw_form_block_title">流程信息</div>
            <div class="gw_form_block_main">
                <table width="90%" border="0" cellspacing="0" cellpadding="0" class="gw_form_block_table">
                    <tbody>
                    <tr>
                        <td width="15%" class="text-right">节点操作提示：</td>
                        <td width="85%" id="flowMemo"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="gw_form_block">
            <div class="gw_form_block_title" onclick="showTable('yjxxTable','showOrHideImg');">
                意见信息
                <img align="right" style="margin-top: 10px" src="/static/images/icon7_down.gif" hspace="0" id="showOrHideImg" />
            </div>
            <!--<div class="dh-left col-xs-1" style="width: 50px" onclick="showTable('yjxxTable','showOrHideImg');"></div>-->
            <div class="gw_form_block_main" id="yjxxTable">
                <div class="table_body-wrapper">
                    <table class="table table-hover table-reset js-disk-row" style="border: 0px">
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid formpage_area" style="margin-bottom: 140px">
        <!-- 基本信息 -->
        <div class="row">
            <div class="col-md-12 ">
                <div class="block_title">
                    <span class="name">党支部“三会一课”年度计划</span>
                </div>
            </div>
        </div>
        <div class="row m-t-15">
            <div class="col-md-12">
                <!--bootstrap-table表格-->
                <table id="right_table"></table>
                <!--     <table id ="" border="1">
                         <tr>
                             <td>季度</td>
                             <td>月份</td>
                             <td>形式</td>
                             <td>主要内容</td>
                         </tr>
                     </table>-->
                <br/>
            </div>
        </div>
        <!-- 基本信息结束 -->
    </div>
</form>
<!--意见信息start-->
<div class="container-fluid gw_form_bottom_yijian" id ="ideaArea" style="display: none;margin-bottom: 50px;" >
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="gw_form_bottom_table  mt_10">
        <tr>
            <td width="15%" class="title">我的意见：</td>
            <td width="85%">
                <table>
                    <tr>
                        <td rowspan="2" width="90%">
                                <textarea name="textarea" id="idea" cols="45" rows="3" placeholder="意见最多填写200字"
                                          class="form_textarea" style="width: 100%;" onkeyup="this.value = this.value.substring(0,200)"></textarea>
                            <span id="idea-count" value="">0</span>/200
                        </td>
                        <td  width="10%">
                            <select class="btn btn-default" style="width: 150px;" name="CuOpinion" id="CuOpinion" onchange="onSelect(this.value,'idea')"></select>
                        </td>
                    </tr>
                    <tr>
                        <td >
                            <a class="white" href="#" onclick="add('idea')">+添加常用意见</a></td>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
<!--意见信息end-->

<!-- 按钮区开始 -->
<!--<div class="formpage_right_btn_area" id="anniu" style=" right: 10px; top: 20px; position: fixed;">
    <ul>
        <li id="save1"><a href="#" id="preserveBtn" onclick="comitForm();"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> 保存</a></li>
        <li id="subflow"><a href="#" id="referBtn" onclick="report();"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> 上报</a></li>

    </ul>
</div>
<div class="form_btn_area" style="text-align: center;">
    <button id="save" class="btn btn-primary form_btn_area_btn2" onclick="commitForm();" ><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> 保存</button>
</div>-->
<div class="gw_form_right_btn_area" style=" right: 20px; top: 20px; position: fixed;">
    <ul>
        <li><a href="#" onclick="openLayer('1')"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> 流程记录</a></li>
        <li><a href="#" onclick="openLayer('2')"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> 流程图</a></li>
        <li><a href="#" onclick="openLayer('3')"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 意见信息</a></li>
    </ul>
</div>
<div class="form_btn_area" style="text-align: center;">
    <button id="save" class="btn btn-primary form_btn_area_btn2" onclick="saveForm()" ><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> 保存</button>
    <button id="sendFLow" class="btn btn-primary form_btn_area_btn2" onclick="commitFlow()" ><span class="glyphicon glyphicon-send" aria-hidden="true"></span> 发送</button>
    <button id="approval" class="btn btn-primary form_btn_area_btn2" style="display: none" onclick="completeFlow('',Config.approvalflag)" ><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> 通过</button>
</div>
<!-- 按钮区结束 -->
<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/core/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/static/core/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="/static/core/bootstrapvalidator/dist/js/bootstrapValidator.min.js"></script>
<script src="/static/core/layer/layer.js"></script>
<script src="/static/js/common/mylayer.js"></script>
<script type="text/javascript" src="/static/js/common/assistUtil.js"></script>
<!-- 流程相关 -->
<script type="text/javascript" src="/modules/system/component/tree/js/deptUserTree.js"></script>
<script type="text/javascript" src="/common/js/config.js"></script>
<script type="text/javascript" src="/product/workflow/js/storages.js"></script>
<script type="text/javascript" src="/common/js/commonFunction.js"></script>
<script src="/static/core/laydate/laydate.js"></script>

<script type="text/javascript" src="/modules/dwgl/shyk/ndjh/js/ndjhEdit.js"></script>

<script src="/static/core/laydate/laydate.js"></script>

<script src="/static/js/common/tablelist.js"></script>

<script src="/static/core/jquery-serializejson/jquery.serializejson.min.js"></script>

<!-- 获取cookie值 -->
<script type="text/javascript" src="/product/workflow/js/common/getCook.js"></script>
<!-- 页面获取参数 -->
<script type="text/javascript" src="/common/js/getrequest.js"></script>
<!-- 自定义意见(最后进行加载) -->
<script type="text/javascript" src="/common/html/notion/notion.js"></script>
<!-- 数据回显 -->
<script type="text/javascript" src="/static/js/common/displayData.js"></script>
<!--点击折叠展开-->
<script type="text/javascript" src="/static/js/common/toggle.js"></script>
<script type="text/javascript" src="/common/js/mergeTable.js"></script>
<script type="text/javascript">
    //定义bootatrap-table数据列
    //sortable：开启列排序，其他参考API
    var right_table_col = [ {
        field: 'quarter'
        , title: '季度'
        , width: '6%'
        , align: "center"
    }, {
        field: 'monthval'
        , title: '月份'
        , width: '6%'
        , align: "center"
    }, {
        field: 'modeval'
        , title: '形式'
        , width: '25%'
        , align: "center"
        , formatter: function (value, row, index) {  //直接定义function,return就是html代码
            return "<textarea class=\"form-control\"  rows=\"3\" name=\"modeval\" maxlength=\"1990\" onchange=\"this.value=this.value.substring(0, 1990)\" onkeydown=\"this.value=this.value.substring(0, 1990)\" onkeyup=\"this.value=this.value.substring(0, 1990)\"  >"+value+"</textarea>";
        }
    },  {
        field: 'primaryCoverage'
        , title: '主要内容'
        , width: '25%'
        , align: "center"
        , formatter: function (value, row, index) {  //直接定义function,return就是html代码
            return "<textarea class=\"form-control\"  rows=\"3\" name=\"primaryCoverage\" maxlength=\"3990\" onchange=\"this.value=this.value.substring(0, 3990)\" onkeydown=\"this.value=this.value.substring(0, 3990)\" onkeyup=\"this.value=this.value.substring(0, 3990)\"  >"+value+"</textarea>";
        }
    }];

    $(document).ready(function (e) {

        //初始化表格
        TableInit.init({
            domId: "right_table",
            url: "/djgl/ddjs/shyk/ndjh/edit",
            pagination: false,	//不分页
            striped:false,
            columns: right_table_col,
            queryParams: function (params) {
                //这里将各个查询项添加到要传递的参数中
                //可以做一些校验
                params.id = $("#id").val();
                return params;
            },
            readOnlyFn: function () {
                $("#right_table").removeClass('table-hover');
//                mergeTableRow('jd');
                $('#form').bootstrapValidator({
                    message: 'This value is not valid',
                    group:".rowGroup",
                    feedbackIcons: {
                        valid: 'glyphicon glyphicon-ok',
                        invalid: 'glyphicon glyphicon-remove',
                        validating: 'glyphicon glyphicon-refresh'
                    },
                    //excluded:[":hidden",":disabled",":not(visible)"] ,//bootstrapValidator的默认配置（对这三种元素不进行校验）
                    fields: {
                        modeval: {
                            message: '形式验证失败！',
                            validators: {
                                stringLength: {
                                    max: 500,
                                    message: '形式长度不能超过500'
                                }
                            }
                        },
                        primaryCoverage: {
                            message: '主要内容验证失败！',
                            validators: {
                                stringLength: {
                                    max: 500,
                                    message: '主要内容长度不能超过500'
                                }
                            }
                        }
                    },
                    submitHandler: function (validator, form, submitButton) {
                        alert("submit");
                    }
                });
            }
        })
    });


</script>
</body>
</html>
