--1、更新输入方式为‘A’字段的输入方式为‘T’，解决录入界面调整不生效问题
update table_struct_description t set t.column_input_type='T' where t.column_input_type='A';

--2、门类表添加全宗code字段
alter table dagl_category_table add (general_archive_code varchar2(50 char));
comment on column dagl_category_table.general_archive_code
  is '全宗code，表示此门类属于哪个全宗';

--3、新增全宗表并插入两条初始化数据
create table DAGL_GENERAL_ARCHIVE
(
  id                   VARCHAR2(36 CHAR) not null,
  general_archive_name VARCHAR2(50 CHAR),
  general_archive_code VARCHAR2(50 CHAR),
  cre_user_id          VARCHAR2(50 CHAR),
  cre_user_name        VARCHAR2(50 CHAR),
  cre_dept_id          VARCHAR2(50 CHAR),
  cre_dept_name        VARCHAR2(50 CHAR),
  cre_chushi_id        VARCHAR2(50 CHAR),
  cre_chushi_name      VARCHAR2(50 CHAR),
  cre_ju_id            VARCHAR2(50 CHAR),
  cre_ju_name          VARCHAR2(50 CHAR),
  cre_time             VARCHAR2(30 CHAR),
  update_user_name     VARCHAR2(50 CHAR),
  update_user_id       VARCHAR2(50 CHAR),
  update_time          VARCHAR2(50 CHAR),
  visible              VARCHAR2(1 CHAR)
)
tablespace ZHGL
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Add comments to the columns 
comment on column DAGL_GENERAL_ARCHIVE.id
  is '唯一标识';
comment on column DAGL_GENERAL_ARCHIVE.general_archive_name
  is '全宗的中文名';
comment on column DAGL_GENERAL_ARCHIVE.general_archive_code
  is '全宗的代号';
comment on column DAGL_GENERAL_ARCHIVE.cre_user_id
  is '创建人id';
comment on column DAGL_GENERAL_ARCHIVE.cre_user_name
  is '创建人姓名';
comment on column DAGL_GENERAL_ARCHIVE.cre_dept_id
  is '创建人部门ID';
comment on column DAGL_GENERAL_ARCHIVE.cre_dept_name
  is '创建人部门名';
comment on column DAGL_GENERAL_ARCHIVE.cre_chushi_id
  is '创建人处室ID';
comment on column DAGL_GENERAL_ARCHIVE.cre_chushi_name
  is '创建人处室名';
comment on column DAGL_GENERAL_ARCHIVE.cre_ju_id
  is '创建人二级局ID';
comment on column DAGL_GENERAL_ARCHIVE.cre_ju_name
  is '创建人二级局名';
comment on column DAGL_GENERAL_ARCHIVE.cre_time
  is '创建时间';
comment on column DAGL_GENERAL_ARCHIVE.update_user_name
  is '最后更新人姓名';
comment on column DAGL_GENERAL_ARCHIVE.update_user_id
  is '最后更新人id';
comment on column DAGL_GENERAL_ARCHIVE.update_time
  is '最后更新时间';
comment on column DAGL_GENERAL_ARCHIVE.visible
  is '0：已“删除；1：未删除';
-- Create/Recreate primary, unique and foreign key constraints 
alter table DAGL_GENERAL_ARCHIVE
  add constraint PRIMARY_ID primary key (ID)
  using index 
  tablespace ZHGL
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
  	insert into DAGL_GENERAL_ARCHIVE (ID, GENERAL_ARCHIVE_NAME, GENERAL_ARCHIVE_CODE, CRE_USER_ID, CRE_USER_NAME, CRE_DEPT_ID, CRE_DEPT_NAME, CRE_CHUSHI_ID, CRE_CHUSHI_NAME, CRE_JU_ID, CRE_JU_NAME, CRE_TIME, UPDATE_USER_NAME, UPDATE_USER_ID, UPDATE_TIME, VISIBLE)
	values ('1', '全宗1', '03', null, null, null, null, null, null, null, null, null, null, null, null, '1');

	insert into DAGL_GENERAL_ARCHIVE (ID, GENERAL_ARCHIVE_NAME, GENERAL_ARCHIVE_CODE, CRE_USER_ID, CRE_USER_NAME, CRE_DEPT_ID, CRE_DEPT_NAME, CRE_CHUSHI_ID, CRE_CHUSHI_NAME, CRE_JU_ID, CRE_JU_NAME, CRE_TIME, UPDATE_USER_NAME, UPDATE_USER_ID, UPDATE_TIME, VISIBLE)
	values ('2', '全宗2', '04', null, null, null, null, null, null, null, null, null, null, null, null, '1');
	  

  --4.修改档案借阅的利用目的的长度
  alter table dagl_borrow modify use_purpose VARCHAR2(200 char);
  alter table dagl_file modify use_purpose VARCHAR2(200 char);
  
  --5.添加列表宽度字段，可以设置列表的宽度
  ALTER TABLE table_struct_description ADD list_column_width number(5) NULL Default 200
  comment on column TABLE_STRUCT_DESCRIPTION.list_column_width is '列表页，该列的宽度';
  
  --6.更新、添加文件状态名称（文件管理-》档案管理）
update sys_data_dictionary t set t.name='已退回待处置' where t.name='不归档' and t.mark='dagl_fileStatus';
update sys_data_dictionary t set t.name='已推送至档案管理员' where t.name='已归档' and t.mark='dagl_fileStatus';
insert into sys_data_dictionary (ID, PID, NAME, CODE, MARK, FLAG, VISIBLE, SORT, REMARK, TYPE, CRE_TIME, CRE_USER_ID, CRE_USER_NAME, CRE_DEPT_ID, CRE_DEPT_NAME, UPDATE_TIME, UPDATE_USER_ID, UPDATE_USER_NAME)
values ('4028d08669ffcc7f016a009f5f1d0004', null, '已归档', '04', 'dagl_fileStatus', '1', '1', 3, null, '1', '2019-04-09 13:43:25', '111245', '杜蒙蒙', '97583', '资金交易科室1', '2019-04-09 13:43:25', '111245', '杜蒙蒙');
  
