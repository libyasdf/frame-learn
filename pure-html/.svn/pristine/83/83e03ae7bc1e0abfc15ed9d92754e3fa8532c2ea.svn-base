<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    
    <title></title>
    <link rel="stylesheet" href="/static/core/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/core/bootstrapvalidator/dist/css/bootstrapValidator.min.css"/>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/static/core/html5/html5shiv.min.js"></script>
    <script src="/static/core/html5/respond.js"></script>
    <![endif]-->
    <link href="/static/css/common/style.css" rel="stylesheet"/>
    <link href="/static/css/common/form-public.css" rel="stylesheet"/>
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="/static/core/jquery-fileupload/css/jquery.fileupload.css">
    <link rel="stylesheet" href="/static/font/iconfont.css">
</head>

<body class="formpage_bj">
	<div class="container-fluid formpage_area">
		<form id="form" class="form-horizontal">
	        <!-- 基本信息 -->
	        <div class="row">
	            <div class="col-md-12 ">
	                <div class="block_title">
	                    <span class="name" >前台QR二维码生成</span>
	                </div>
	            </div>
	        </div>
			<!--查询项输入框选择框等开始-->
			<div class="row m-t-15">
	            <div class="col-md-12">
					<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							<b style="color: red;">*</b> 二维码内容：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="nr" name="nr" >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							 二维码边长：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="side_q" name="side_q" onkeyup="value=value.replace(/[^\d]/g,'') " ng-pattern="/[^a-zA-Z]/">
						</div>
					</div>
					<!--查询项输入框选择框等结束-->
		
					<!--查询重置等按钮-->
					<div class="form-group">
						<div class="col-sm-12" style="text-align: center">
							<button type="button" class="btn btn-primary" onclick="savecode()">
								生成二维码
							</button>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<button type="button" class="btn btn-primary" onclick="closeIfram();">
								关&nbsp;&nbsp;闭
							</button>
						</div>
					</div>
					<div class="form-group" id="qrcode" hidden="hidden">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							 生成的二维码：</label>
						<div class="col-sm-7" id="Qrcode">
						</div>
					</div>
				</div>
			</div>
			<!-- 后台生成QR二维码 -->
			<div class="row">
	            <div class="col-md-12 ">
	                <div class="block_title">
	                    <span class="name" >后台QR二维码生成</span>
	                </div>
	            </div>
	        </div>
	        <div class="row m-t-15">
	            <div class="col-md-12">
	            	<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							<b style="color: red;">*</b> 二维码名称：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="name" name="name" >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							<b style="color: red;">*</b> 二维码内容：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="NR" name="NR" >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							 二维码描述：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="describe" name="describe" >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							 二维码边长：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="side" name="side" onkeyup="value=value.replace(/[^\d]/g,'') " ng-pattern="/[^a-zA-Z]/">
						</div>
					</div>
					<!--查询项输入框选择框等结束-->
		
					<!--查询重置等按钮-->
					<div class="form-group">
						<div class="col-sm-12" style="text-align: center">
							<button type="button" class="btn btn-primary" onclick="saveqrcode()">
								生成二维码
							</button>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<button type="button" class="btn btn-primary" onclick="closeIfram();">
								关&nbsp;&nbsp;闭
							</button>
						</div>
					</div>
					<div class="form-group" id="qrcode_ht" hidden="hidden">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							 生成的二维码：</label>
						<div class="col-sm-7" id="QRcode_ht">
						</div>
					</div>
				</div>
			</div>
			
			<!-- pdf417二维码 -->
			<div class="row">
	            <div class="col-md-12 ">
	                <div class="block_title">
	                    <span class="name" >后台pdf417二维码生成</span>
	                </div>
	            </div>
	        </div>
	        <div class="row m-t-15">
	            <div class="col-md-12">
	            	<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							<b style="color: red;">*</b> 二维码名称：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="name_pdf" name="name_pdf" >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							<b style="color: red;">*</b> 二维码内容：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="NR_pdf" name="NR_pdf" >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							 二维码宽：</label><!-- 后期宽和高都要数字验证，并且给定一个合适的范围，并建议宽的值比高的值大 ,，并且那些需要必填，空值得宽高，后台应该怎么处理。-->
						<div class="col-sm-7">
							<input class="form-control" type="text" id="width_pdf" name="width_pdf" >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							 二维码高：</label>
						<div class="col-sm-7">
							<input class="form-control" type="text" id="height_pdf" name="height_pdf" >
						</div>
					</div>
					<!--查询项输入框选择框等结束-->
		
					<!--查询重置等按钮-->
					<div class="form-group">
						<div class="col-sm-12" style="text-align: center">
							<button type="button" class="btn btn-primary" onclick="savepdfcode()">
								生成二维码
							</button>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<button type="button" class="btn btn-primary" onclick="closeIfram();">
								关&nbsp;&nbsp;闭
							</button>
						</div>
					</div>
					<div class="form-group" id="pdfcode_ht" hidden="hidden">
						<label class="col-sm-offset-1 col-sm-2 control-label">
							 生成的二维码：</label>
						<div class="col-sm-7" id="PDFcode_ht">
						</div>
					</div>
					<!-- 基本信息 -->
	        <div class="row">
	            <div class="col-md-12 ">
	                <div class="block_title">
	                    <span class="name" >QR二维码和pdf417二维码比较</span>
	                </div>
	            </div>
	        </div>
	        <div style="padding-left: 20px;">
	        	<ul>
	        		<li style="list-style: disc;"> QR码比PDF417识别速度快，可达到30个/秒，而PDF417为3个/秒；</li>
	        		<li style="list-style: disc;"> QR码可以实现360°全方向旋转识读，PDF417需要在+/-10°的范围内才能被识读；</li>
	        		<li style="list-style: disc;"> QR码表示汉字的效率比PDF417码高20%，QR码使用13bit表示一个汉字，而PDF417使用16bits表示一个汉字；</li>
	        		<li style="list-style: disc;"> QR码数据容量大，信息密度大，最多可表示多达3KB的内容，PDF417最多确只能表示1KB的内容；</li>
	        		<li style="list-style: disc;"> QR码是正方形，PDF417是长方形，同样数据容量、有限的面积的情况下QR码可以表示更多的内容；</li>
	        		<li style="list-style: disc;"> QR码对识读设备要求较低，PDF417当容量比较大时长度也会随之增加，所以就要求识读设备可以读取较长的空间；</li>
	        		<li style="list-style: disc;"> 支持QR码开发的工具控件非常多，使用起来非常方便；</li>
	        		<li style="list-style: disc;"> QR码又被称为手机二维码，所以QR码不但支持了传统PC设备上的Windows、Linux等系统，还支持了手机平台的主要系统，例如：Windows Mobile、Symbian OS、等，而PDF417尚未见过类似的应用。</li>
	        	</ul>
			</div>
		</form>
	</div>
	<!-- 按钮区结束 -->
<script src="/static/core/jquery/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="/modules/system/config/toggle/js/jquery.qrcode.min.js"></script>
<script type="text/javascript" src="/modules/system/config/toggle/js/qrcode.js"></script>
<script type="text/javascript" src="/modules/system/config/toggle/js/utf.js"></script>
<script src="/static/core/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/core/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/static/core/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="/static/core/bootstrapvalidator/dist/js/bootstrapValidator.min.js"></script>
<script src="/static/core/layer/layer.js"></script>
<script src="/static/js/common/mylayer.js"></script>
<script type="text/javascript" src="/static/js/common/assistUtil.js"></script>

<script src="/static/core/laydate/laydate.js"></script>
<!-- 流程相关 -->
<script type="text/javascript" src="/common/js/config.js"></script>
<script type="text/javascript" src="/product/workflow/js/storages.js"></script>
<script type="text/javascript" src="/common/js/commonFunction.js"></script>
<!-- <script type="text/javascript" src="/common/js/overlay.js"></script> -->
<!-- 获取cookie值 -->
<script type="text/javascript" src="/product/workflow/js/common/getCook.js"></script>
<!-- 页面获取参数 -->
<script type="text/javascript" src="/common/js/getrequest.js"></script>
<!-- 自定义意见(最后进行加载) -->
<script type="text/javascript" src="/common/html/notion/notion.js"></script>
<!-- 数据回显 -->
<script type="text/javascript" src="/static/js/common/displayData.js"></script>

<!--文件上传js-->
<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="/static/core/jquery-fileupload/js/vendor/jquery.ui.widget.js"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="/static/core/jquery-fileupload/js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="/static/core/jquery-fileupload/js/jquery.fileupload.js"></script>
<script src="/static/js/common/myfilupload.js"></script>
<script type="text/javascript" src="js/toggleValidator.js"></script>
<script type="text/javascript">

	// 提交
	function savecode() {
		$("#qrcode").show();
		//解决中文乱码
		var txt = toUtf8($("#nr").val());
// 		$("#Qrcode").qrcode(text);
		$("#Qrcode").qrcode({
// 			render: "table", //table方式
			width: parseInt($("#side_q").val()), //宽度
			height:parseInt($("#side_q").val()), //高度
			text: txt //任意内容
		});
	}
	function saveqrcode() {
		
		$.ajax({
    		type: "POST",
    		url:"/system/config/toggle/creatQRcode",
    		data:{"name":$("#name").val(),"url":$("#NR").val(),"note":$("#describe").val(),"side":$("#side").val()},
    		async: false,
    		dataType:"json",
    		success:function(data){
    		    if ('1' == data.flag) {
                    layer.msg("保存成功！", {icon: 1,time:1000}, function (index) {
                    	$("#qrcode_ht").show();
                    	document.getElementById("QRcode_ht").innerHTML = "<img alt=\"开关描述二维码\" src=\"/image/"+data.qrurl+"\">";
                    });
                }
    		},
    		error:function(data){
    			
    		}
    	});
	}
	
	function savepdfcode() {
		
		$.ajax({
    		type: "POST",
    		url:"/system/config/toggle/creatpdfcode",
    		data:{"name":$("#name_pdf").val(),"url":$("#NR_pdf").val(),"width":$("#width_pdf").val(),"height":$("#height_pdf").val()},
    		async: false,
    		dataType:"json",
    		success:function(data){
    		    if ('1' == data.flag) {
    		    	console.log(data.qrurl);
                    layer.msg("保存成功！", {icon: 1,time:1000}, function (index) {
                    	$("#pdfcode_ht").show();
                    	document.getElementById("PDFcode_ht").innerHTML = "<img alt=\"开关描述二维码\" src=\"/image/"+data.qrurl+"\">";
                    });
                }
    		},
    		error:function(data){
    			
    		}
    	});
	}

	//关闭当前窗口
	function closeIfram(){
        var index=parent.layer.getFrameIndex(window.name);
        parent.layer.close(index);
	}
</script>
</body>
</html>